<!doctype html><html lang=en><head><meta charset=UTF-8><meta content="default-src 'self';font-src 'self' data:;img-src 'self' https://* data:;media-src 'self';style-src 'self';frame-src player.vimeo.com https://www.youtube-nocookie.com giscus.app;connect-src 'self';script-src 'self'  giscus.app 'self'" http-equiv=Content-Security-Policy><meta content="width=device-width,initial-scale=1.0" name=viewport><meta content=https://ogobrecht.com name=base><title>
Ottmar’s Notes • How to use mkstore and orapki with Oracle Instant Client</title><link href=https://ogobrecht.com/img/avatar.png rel=icon type=image/png><link title="Ottmar’s Notes - Atom Feed" href=https://ogobrecht.com/atom.xml rel=alternate type=application/atom+xml><link href="https://ogobrecht.com/custom_subset.css?h=0b9535a28bc3d5bf2321" rel=stylesheet><link href="https://ogobrecht.com/main.css?h=045c365e19a4d50a64bb" rel=stylesheet><meta content="light dark" name=color-scheme><meta content="Create and manage wallets without full client installation" name=description><meta content="Create and manage wallets without full client installation" property=og:description><meta content="How to use mkstore and orapki with Oracle Instant Client" property=og:title><meta content=article property=og:type><meta content=en_GB property=og:locale><meta content=https://ogobrecht.com/blog/how-to-use-mkstore-and-orapki-with-oracle-instant-client/ property=og:url><meta content="Ottmar’s Notes" property=og:site_name><noscript><link href=https://ogobrecht.com/no_js.css rel=stylesheet></noscript><script src=https://ogobrecht.com/js/initializeTheme.min.js></script><script defer src=https://ogobrecht.com/js/themeSwitcher.min.js></script><script src="https://ogobrecht.com/js/searchElasticlunr.min.js?h=3626c0ef99daa745b31e" defer></script><body><a href=#main-content id=skip-link>Skip to content</a><header><nav class=navbar><div class=nav-title><a class=home-title href=https://ogobrecht.com/>Ottmar’s Notes</a></div><div class=nav-navs><ul><li><a class="nav-links no-hover-padding" href=https://ogobrecht.com/blog/>blog </a><li><a class="nav-links no-hover-padding" href=https://ogobrecht.com/archive/>archive </a><li><a class="nav-links no-hover-padding" href=https://ogobrecht.com/tags/>tags </a><li><a class="nav-links no-hover-padding" href=https://ogobrecht.com/projects/>projects </a><li class=menu-icons-container><ul class=menu-icons-group><li class="js menu-icon"><div aria-label="Click or press $SHORTCUT to open search" class="search-icon interactive-icon" title="Click or press $SHORTCUT to open search" id=search-button role=button tabindex=0><svg viewbox="0 -960 960 960" xmlns=http://www.w3.org/2000/svg><path d="M784-120 532-372q-30 24-69 38t-83 14q-109 0-184.5-75.5T120-580q0-109 75.5-184.5T380-840q109 0 184.5 75.5T640-580q0 44-14 83t-38 69l252 252-56 56ZM380-400q75 0 127.5-52.5T560-580q0-75-52.5-127.5T380-760q-75 0-127.5 52.5T200-580q0 75 52.5 127.5T380-400Z"/></svg></div><li class="theme-switcher-wrapper js"><div aria-label="Toggle dark mode" title="Toggle dark/light mode" aria-pressed=false class=theme-switcher role=button tabindex=0></div><div aria-label="Reset mode to default" class="theme-resetter arrow" title="Reset mode to default" aria-hidden=true role=button tabindex=0></div></ul></ul></div></nav></header><div class=content id=main-content><main><article class=h-entry><h1 class="p-name article-title">How to use mkstore and orapki with Oracle Instant Client</h1><a class="u-url u-uid" href=https://ogobrecht.com/blog/how-to-use-mkstore-and-orapki-with-oracle-instant-client/></a><ul class=meta><span class="hidden p-author h-card"> <a title="Ottmar Gobrecht" class=u-url href=https://ogobrecht.com rel=author>Ottmar Gobrecht</a> </span><li><time class=dt-published datetime=2020-07-29>29th Jul 2020</time><li title="308 words"><span aria-hidden=true class=separator>•</span>2 min read<li class=tag><span aria-hidden=true class=separator>•</span>Tags: <li class=tag><a class=p-category href=https://ogobrecht.com/tags/oracle/>Oracle</a>, <li class=tag><a class=p-category href=https://ogobrecht.com/tags/wallet/>Wallet</a>, <li class=tag><a class=p-category href=https://ogobrecht.com/tags/script/>Script</a></ul><p class=p-summary hidden>Create and manage wallets without full client installation<section class="e-content body"><p>For some years I use only the <a class=external href=https://www.oracle.com/database/technologies/instant-client.html rel=external>Oracle Instant Client</a>. I had too often trouble with the full client installation on my corporate PCs under Windows, especially in the old Windows 32/64 bit times. The instant client can be used by download and extract one basic zip file and adding an entry to your path environment variable. If you want to use SQL*Plus and other tools you need to download two additional files - no drama, also without admin rights.<p>When I started to store the user details in wallet files I was wondering why Oracle does not deliver the mkstore and orapki tools with the instant client. I searched for a workaround and found some posts about it - including installing the full client or other software to get the tools. But I do not want to install additional software only for two small command-line tools. I found the final hint in an <a class=external href=https://andriydmytrenko.wordpress.com/2013/07/01/using-the-secure-external-password-store-with-instant-client/ rel=external>old post from Andriy Dmytrenko</a>. Seems that the two utilities are only shell scripts that are calling some Java libraries. The question was from which location I should take the needed libraries. Since I also have <a class=external href=https://www.oracle.com/database/technologies/appdev/sqlcl.html rel=external>SQLcl</a> on my PC I found the libs there. Below my final shell scripts for Windows - put them somewhere and have the path pointing to the directory where they are stored. If you need them for Linux you will find a way to do it by yourself:<p>mkstore.bat:<pre class="giallo z-code"><code data-lang=bat><span class=giallo-l><span class="z-keyword z-operator">@</span><span class=z-keyword>echo off</span></span>
<span class=giallo-l><span class=z-keyword>rem</span><span class=z-comment> inspiration: https://andriydmytrenko.wordpress.com/2013/07/01/using-the-secure-external-password-store-with-instant-client/</span></span>
<span class=giallo-l></span>
<span class=giallo-l><span class=z-keyword>setlocal</span></span>
<span class=giallo-l></span>
<span class=giallo-l><span class=z-keyword>rem</span><span class=z-comment> get the command line arguments</span></span>
<span class=giallo-l><span class=z-keyword>set</span><span class="z-variable z-other z-readwrite"> args</span><span class="z-keyword z-operator">=</span></span>
<span class=giallo-l><span class=z-punctuation>:</span><span class=z-keyword>loop</span></span>
<span class=giallo-l><span class=z-keyword>  if</span><span class="z-punctuation z-definition z-variable z-variable z-other z-readwrite"> !%1==!</span><span class=z-keyword> goto</span><span class=z-punctuation> :</span><span class=z-keyword>done</span></span>
<span class=giallo-l><span class=z-keyword>  set</span><span class="z-variable z-other z-readwrite"> args</span><span class="z-keyword z-operator">=</span><span class="z-punctuation z-definition z-variable z-variable z-other z-readwrite">%args% %</span><span class="z-variable z-parameter">1</span></span>
<span class=giallo-l><span class=z-keyword>  shift</span></span>
<span class=giallo-l><span class=z-keyword>  goto</span><span class=z-punctuation> :</span><span class=z-keyword>loop</span></span>
<span class=giallo-l><span class=z-punctuation>:</span><span class=z-keyword>done</span></span>
<span class=giallo-l></span>
<span class=giallo-l><span class=z-keyword>rem</span><span class=z-comment> set classpath for mkstore - align this to your local SQLcl installation</span></span>
<span class=giallo-l><span class=z-keyword>set</span><span class="z-variable z-other z-readwrite"> sqlcl</span><span class="z-keyword z-operator">=</span><span class=z-source>c:\path\to\sqlcl\lib</span></span>
<span class=giallo-l><span class=z-keyword>set</span><span class="z-variable z-other z-readwrite"> classpath</span><span class="z-keyword z-operator">=</span><span class="z-punctuation z-definition z-variable z-variable z-other z-readwrite z-source">%sqlcl%\oraclepki.jar</span></span>
<span class=giallo-l><span class=z-keyword>set</span><span class="z-variable z-other z-readwrite"> classpath</span><span class="z-keyword z-operator">=</span><span class="z-punctuation z-definition z-variable z-variable z-other z-readwrite z-source">%classpath%;%sqlcl%\osdt_core.jar</span></span>
<span class=giallo-l><span class=z-keyword>set</span><span class="z-variable z-other z-readwrite"> classpath</span><span class="z-keyword z-operator">=</span><span class="z-punctuation z-definition z-variable z-variable z-other z-readwrite z-source">%classpath%;%sqlcl%\osdt_cert.jar</span></span>
<span class=giallo-l></span>
<span class=giallo-l><span class=z-keyword>rem</span><span class=z-comment> simulate mkstore command</span></span>
<span class=giallo-l><span class="z-source z-punctuation z-definition z-variable z-variable z-other z-readwrite">java -classpath %classpath% oracle.security.pki.OracleSecretStoreTextUI %args%</span></span>
<span class=giallo-l></span>
<span class=giallo-l><span class=z-keyword>endlocal</span></span></code></pre><p>orapki.bat:<pre class="giallo z-code"><code data-lang=bat><span class=giallo-l><span class="z-keyword z-operator">@</span><span class=z-keyword>echo off</span></span>
<span class=giallo-l><span class=z-keyword>rem</span><span class=z-comment> inspiration: https://andriydmytrenko.wordpress.com/2013/07/01/using-the-secure-external-password-store-with-instant-client/</span></span>
<span class=giallo-l></span>
<span class=giallo-l><span class=z-keyword>setlocal</span></span>
<span class=giallo-l></span>
<span class=giallo-l><span class=z-keyword>rem</span><span class=z-comment> get the command line arguments</span></span>
<span class=giallo-l><span class=z-keyword>set</span><span class="z-variable z-other z-readwrite"> args</span><span class="z-keyword z-operator">=</span></span>
<span class=giallo-l><span class=z-punctuation>:</span><span class=z-keyword>loop</span></span>
<span class=giallo-l><span class=z-keyword>  if</span><span class="z-punctuation z-definition z-variable z-variable z-other z-readwrite"> !%1==!</span><span class=z-keyword> goto</span><span class=z-punctuation> :</span><span class=z-keyword>done</span></span>
<span class=giallo-l><span class=z-keyword>  set</span><span class="z-variable z-other z-readwrite"> args</span><span class="z-keyword z-operator">=</span><span class="z-punctuation z-definition z-variable z-variable z-other z-readwrite">%args% %</span><span class="z-variable z-parameter">1</span></span>
<span class=giallo-l><span class=z-keyword>  shift</span></span>
<span class=giallo-l><span class=z-keyword>  goto</span><span class=z-punctuation> :</span><span class=z-keyword>loop</span></span>
<span class=giallo-l><span class=z-punctuation>:</span><span class=z-keyword>done</span></span>
<span class=giallo-l></span>
<span class=giallo-l><span class=z-keyword>rem</span><span class=z-comment> set classpath for orapki - align this to your local SQLcl installation</span></span>
<span class=giallo-l><span class=z-keyword>set</span><span class="z-variable z-other z-readwrite"> sqlcl</span><span class="z-keyword z-operator">=</span><span class=z-source>c:\path\to\sqlcl\lib</span></span>
<span class=giallo-l><span class=z-keyword>set</span><span class="z-variable z-other z-readwrite"> classpath</span><span class="z-keyword z-operator">=</span><span class="z-punctuation z-definition z-variable z-variable z-other z-readwrite z-source">%sqlcl%\oraclepki.jar</span></span>
<span class=giallo-l><span class=z-keyword>set</span><span class="z-variable z-other z-readwrite"> classpath</span><span class="z-keyword z-operator">=</span><span class="z-punctuation z-definition z-variable z-variable z-other z-readwrite z-source">%classpath%;%sqlcl%\osdt_core.jar</span></span>
<span class=giallo-l><span class=z-keyword>set</span><span class="z-variable z-other z-readwrite"> classpath</span><span class="z-keyword z-operator">=</span><span class="z-punctuation z-definition z-variable z-variable z-other z-readwrite z-source">%classpath%;%sqlcl%\osdt_cert.jar</span></span>
<span class=giallo-l></span>
<span class=giallo-l><span class=z-keyword>rem</span><span class=z-comment> simulate orapki command</span></span>
<span class=giallo-l><span class="z-source z-punctuation z-definition z-variable z-variable z-other z-readwrite">java -classpath %classpath% oracle.security.pki.textui.OraclePKITextUI %args%</span></span>
<span class=giallo-l></span>
<span class=giallo-l><span class=z-keyword>endlocal</span></span></code></pre><p>If you need a starter on using mkstore and orapki then Tim Hall from Oracle Base has covered you with an <a class=external href=https://oracle-base.com/articles/10g/secure-external-password-store-10gr2 rel=external>article about the secure external password store</a>.<p>Happy password storing :-)<p>Ottmar</section><nav class="full-width article-navigation"><div><a aria-describedby=left_title aria-label=Prev href=https://ogobrecht.com/blog/sample-data-sets-for-oracle/><span class=arrow>←</span> Prev</a><p aria-hidden=true id=left_title>Sample Data Sets for Oracle</div><div><a aria-describedby=right_title aria-label=Next href=https://ogobrecht.com/blog/how-to-migrate-oracle-cloud-wallet-into-existing-auto-login-local-wallet/>Next <span class=arrow>→</span></a><p aria-hidden=true id=right_title>How to migrate Oracle Cloud wallet into existing auto_login_local wallet</div></nav><div data-repo-id="MDEwOlJlcG9zaXRvcnkzMjEzNzI3MzE=" class=comments data-category=General data-category-id=DIC_kwDOEyfCO84C0uh1 data-dark-theme=noborder_dark data-input-position=bottom data-lang=en data-lazy-loading=true data-light-theme=noborder_light data-mapping=specific data-reactions-enabled=0 data-repo=ogobrecht/ogobrecht.com data-strict=1 data-term=how-to-use-mkstore-and-orapki-with-oracle-instant-client id=comments><script async src=https://ogobrecht.com/js/giscus.min.js></script><noscript>You need JavaScript to view the comments.</noscript></div></article></main><div id=button-container><a title="Go to the comments section" class=no-hover-padding href=#comments id=comments-button> <svg viewbox="0 0 20 20" fill=currentColor><path d="M18 10c0 3.866-3.582 7-8 7a8.841 8.841 0 01-4.083-.98L2 17l1.338-3.123C2.493 12.767 2 11.434 2 10c0-3.866 3.582-7 8-7s8 3.134 8 7zM7 9H5v2h2V9zm8 0h-2v2h2V9zM9 9h2v2H9V9z" clip-rule=evenodd fill-rule=evenodd /></svg> </a><a title="Go to the top of the page" class=no-hover-padding href=# id=top-button> <svg viewbox="0 0 20 20" fill=currentColor><path d="M3.293 9.707a1 1 0 010-1.414l6-6a1 1 0 011.414 0l6 6a1 1 0 01-1.414 1.414L11 5.414V17a1 1 0 11-2 0V5.414L4.707 9.707a1 1 0 01-1.414 0z"/></svg> </a></div><span class=hidden id=copy-success> Copied! </span><span class=hidden id=copy-init> Copy code to clipboard </span><script defer src=https://ogobrecht.com/js/copyCodeToClipboard.min.js></script></div><footer><section><nav class="socials nav-navs"><ul><li><a class="nav-links no-hover-padding social" href=https://ogobrecht.com/atom.xml> <img alt=feed loading=lazy src=https://ogobrecht.com/social_icons/rss.svg title=feed> </a><li><a class="nav-links no-hover-padding social" rel=" me" href=https://github.com/ogobrecht> <img alt=GitHub loading=lazy src=https://ogobrecht.com/social_icons/github.svg title=GitHub> </a><li><a class="nav-links no-hover-padding social" rel=" me" href=https://bsky.app/profile/ogobrecht.com> <img alt=Bluesky loading=lazy src=https://ogobrecht.com/social_icons/bluesky.svg title=Bluesky> </a><li><a class="nav-links no-hover-padding social" rel=" me" href=https://www.linkedin.com/in/ogobrecht/> <img alt=LinkedIn loading=lazy src=https://ogobrecht.com/social_icons/linkedin.svg title=LinkedIn> </a><li><a class="nav-links no-hover-padding social" rel=" me" href=mailto:ottmar.gobrecht@gmail.com> <img alt=Email loading=lazy src=https://ogobrecht.com/social_icons/email.svg title=Email> </a></ul></nav><nav class=nav-navs><small> <ul><li><a class="nav-links no-hover-padding" href=https://ogobrecht.com/imprint/> imprint </a><li><a class="nav-links no-hover-padding" href=https://ogobrecht.com/privacy/> privacy policy </a><li><a class="nav-links no-hover-padding" href=https://ogobrecht.com/sitemap.xml> sitemap </a></ul> </small></nav><div class=credits><small> Powered by <a href=https://www.getzola.org>Zola</a> & <a href=https://github.com/welpo/tabi>tabi</a> </small></div></section><div class="search-modal js" aria-labelledby=modalTitle id=searchModal role=dialog><h1 class=visually-hidden id=modalTitle>Search</h1><div id=modal-content><div id=searchBar><div aria-hidden=true class=search-icon><svg viewbox="0 -960 960 960" xmlns=http://www.w3.org/2000/svg><path d="M784-120 532-372q-30 24-69 38t-83 14q-109 0-184.5-75.5T120-580q0-109 75.5-184.5T380-840q109 0 184.5 75.5T640-580q0 44-14 83t-38 69l252 252-56 56ZM380-400q75 0 127.5-52.5T560-580q0-75-52.5-127.5T380-760q-75 0-127.5 52.5T200-580q0 75 52.5 127.5T380-400Z"/></svg></div><input aria-controls=results-container aria-expanded=false autocomplete=off id=searchInput placeholder=Search… role=combobox spellcheck=false><div class="close-icon interactive-icon" title="Clear search" id=clear-search role=button tabindex=0><svg viewbox="0 -960 960 960" xmlns=http://www.w3.org/2000/svg><path d="m256-200-56-56 224-224-224-224 56-56 224 224 224-224 56 56-224 224 224 224-56 56-224-224-224 224Z"/></svg></div></div><div id=results-container><div id=results-info><span id=zero_results> No results</span><span id=one_results> $NUMBER result</span><span id=many_results> $NUMBER results</span><span id=two_results> $NUMBER results</span><span id=few_results> $NUMBER results</span></div><div id=results role=listbox></div></div></div></div></footer>