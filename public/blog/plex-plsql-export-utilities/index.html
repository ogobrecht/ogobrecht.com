<!doctype html><html lang=en><head><meta charset=UTF-8><meta content="default-src 'self';font-src 'self' data:;img-src 'self' https://* data:;media-src 'self';style-src 'self';frame-src player.vimeo.com https://www.youtube-nocookie.com giscus.app;connect-src 'self';script-src 'self'  giscus.app 'self'" http-equiv=Content-Security-Policy><meta content="width=device-width,initial-scale=1.0" name=viewport><meta content=https://ogobrecht.com name=base><title>
Ottmar’s Notes • PLEX - PL/SQL Export Utilities</title><link href=https://ogobrecht.com/img/avatar.png rel=icon type=image/png><link title="Ottmar’s Notes - Atom Feed" href=https://ogobrecht.com/atom.xml rel=alternate type=application/atom+xml><link href="https://ogobrecht.com/custom_subset.css?h=0b9535a28bc3d5bf2321" rel=stylesheet><link href="https://ogobrecht.com/main.css?h=045c365e19a4d50a64bb" rel=stylesheet><meta content="light dark" name=color-scheme><meta content="Export Oracle APEX app, ORDS modules, all schema objects and table data in one go" name=description><meta content="Export Oracle APEX app, ORDS modules, all schema objects and table data in one go" property=og:description><meta content="PLEX - PL/SQL Export Utilities" property=og:title><meta content=article property=og:type><meta content=en_GB property=og:locale><meta content=https://ogobrecht.com/blog/plex-plsql-export-utilities/ property=og:url><meta content="Ottmar’s Notes" property=og:site_name><noscript><link href=https://ogobrecht.com/no_js.css rel=stylesheet></noscript><script src=https://ogobrecht.com/js/initializeTheme.min.js></script><script defer src=https://ogobrecht.com/js/themeSwitcher.min.js></script><script src="https://ogobrecht.com/js/searchElasticlunr.min.js?h=3626c0ef99daa745b31e" defer></script><body><a href=#main-content id=skip-link>Skip to content</a><header><nav class=navbar><div class=nav-title><a class=home-title href=https://ogobrecht.com/>Ottmar’s Notes</a></div><div class=nav-navs><ul><li><a class="nav-links no-hover-padding" href=https://ogobrecht.com/blog/>blog </a><li><a class="nav-links no-hover-padding" href=https://ogobrecht.com/archive/>archive </a><li><a class="nav-links no-hover-padding" href=https://ogobrecht.com/tags/>tags </a><li><a class="nav-links no-hover-padding" href=https://ogobrecht.com/projects/>projects </a><li class=menu-icons-container><ul class=menu-icons-group><li class="js menu-icon"><div aria-label="Click or press $SHORTCUT to open search" class="search-icon interactive-icon" title="Click or press $SHORTCUT to open search" id=search-button role=button tabindex=0><svg viewbox="0 -960 960 960" xmlns=http://www.w3.org/2000/svg><path d="M784-120 532-372q-30 24-69 38t-83 14q-109 0-184.5-75.5T120-580q0-109 75.5-184.5T380-840q109 0 184.5 75.5T640-580q0 44-14 83t-38 69l252 252-56 56ZM380-400q75 0 127.5-52.5T560-580q0-75-52.5-127.5T380-760q-75 0-127.5 52.5T200-580q0 75 52.5 127.5T380-400Z"/></svg></div><li class="theme-switcher-wrapper js"><div aria-label="Toggle dark mode" title="Toggle dark/light mode" aria-pressed=false class=theme-switcher role=button tabindex=0></div><div aria-label="Reset mode to default" class="theme-resetter arrow" title="Reset mode to default" aria-hidden=true role=button tabindex=0></div></ul></ul></div></nav></header><div class=content id=main-content><main><article class=h-entry><h1 class="p-name article-title">PLEX - PL/SQL Export Utilities</h1><a class="u-url u-uid" href=https://ogobrecht.com/blog/plex-plsql-export-utilities/></a><ul class=meta><span class="hidden p-author h-card"> <a title="Ottmar Gobrecht" class=u-url href=https://ogobrecht.com rel=author>Ottmar Gobrecht</a> </span><li><time class=dt-published datetime=2018-08-26>26th Aug 2018</time><li title="1474 words"><span aria-hidden=true class=separator>•</span>8 min read<li class=tag><span aria-hidden=true class=separator>•</span>Tags: <li class=tag><a class=p-category href=https://ogobrecht.com/tags/oracle/>Oracle</a>, <li class=tag><a class=p-category href=https://ogobrecht.com/tags/apex/>APEX</a>, <li class=tag><a class=p-category href=https://ogobrecht.com/tags/pl-sql/>PL/SQL</a>, <li class=tag><a class=p-category href=https://ogobrecht.com/tags/version-control/>Version control</a></ul><p class=p-summary hidden>Export Oracle APEX app, ORDS modules, all schema objects and table data in one go<section class="e-content body"><p>PLEX is a standalone PL/SQL package with export utilities. It was created to be able to quickstart version control for existing (APEX) apps. It currently has two main functions called <code>backapp</code> and <code>queries_to_csv</code>. <code>queries_to_csv</code> is used by BackApp as a helper function, but its functionality is also useful as a standalone. This post is all about BackApp, which has the following features:<ul><li>Export the app definition of an APEX app (splitted files and optional single SQL file)<li>Export all ORDS modules from the current schema<li>Export all object DDL from the current schema<li>Export table data into CSV files<li>Provide basic script templates for export/import of whole app for DEV, TEST and PROD<li>Everything in a (hopefully) nice directory structure ready to use with version control<li>Return value is a file collection of type plex.tab_export_files (it was apex_t_export_files before PLEX version 2) for further processing <ul><li>Each file in the collection is represented by a record with two columns <ul><li><code>name</code> of type VARCHAR2(255), which is in fact the file path<li><code>contents</code> of type CLOB</ul><li>You can optionally zip the file collection with the helper function <code>to_zip</code><li>Also see the my previous post on <a href=/blog/apex-export-and-version-control/>how to handle the apex_t_export_files type returned by the APEX_EXPORT package with SQL*Plus</a></ul></ul><h2 id=getting-started>Getting Started</h2><ol><li><a class=external href=https://github.com/ogobrecht/plex/releases/latest rel=external>Download the latest code</a><li>Run the provided install script <code>plex_install.sql</code> (provides compiler flags) in your desired schema - could also be a central tools schema, don’t forget <code>grant execute on plex to xxx</code><li>Startup your favorite SQL Tool, connect to your app schema and fire up the following query:</ol><pre class="giallo z-code"><code data-lang=sql><span class=giallo-l><span class=z-keyword>select</span><span class=z-source> plex.to_zip(plex.backapp(p_app_id </span><span class="z-keyword z-operator">=></span><span class=z-source> yourAppId)) </span><span class=z-keyword>from</span><span class=z-source> dual;</span></span></code></pre><p>Save the resulting BLOB file under a name with the extension <code>.zip</code> and extract it to a local directory of your choice. You will find this directory structure and files:<pre class="giallo z-code"><code data-lang=plain><span class=giallo-l><span>- app_backend (only, when p_include_object_ddl is set to true, see next example)</span></span>
<span class=giallo-l><span>  - package_bodies</span></span>
<span class=giallo-l><span>  - packages</span></span>
<span class=giallo-l><span>  - tables</span></span>
<span class=giallo-l><span>  - ref_constraints</span></span>
<span class=giallo-l><span>  - ...</span></span>
<span class=giallo-l><span>- app_data (only, when p_include_data is set to true)</span></span>
<span class=giallo-l><span>- app_frontend (for the apex app files without subfolder fxxx)</span></span>
<span class=giallo-l><span>  - pages</span></span>
<span class=giallo-l><span>  - shared_components</span></span>
<span class=giallo-l><span>  - ...</span></span>
<span class=giallo-l><span>- app_web_services (only, when p_include_ords_modules is set to true)</span></span>
<span class=giallo-l><span>- docs</span></span>
<span class=giallo-l><span>- scripts</span></span>
<span class=giallo-l><span>  - logs</span></span>
<span class=giallo-l><span>  - templates</span></span>
<span class=giallo-l><span>    - 1_export_app_from_DEV.bat</span></span>
<span class=giallo-l><span>    - 2_install_app_into_TEST.bat</span></span>
<span class=giallo-l><span>    - 3_install_app_into_PROD.bat</span></span>
<span class=giallo-l><span>    - export_app_custom_code.sql</span></span>
<span class=giallo-l><span>    - install_app_custom_code.sql</span></span>
<span class=giallo-l><span>  - install_backend_generated_by_plex.sql</span></span>
<span class=giallo-l><span>  - install_frontend_generated_by_apex.sql</span></span>
<span class=giallo-l><span>  - install_web_services_generated_by_ords.sql</span></span>
<span class=giallo-l><span>- tests</span></span>
<span class=giallo-l><span>- plex_README.md</span></span>
<span class=giallo-l><span>- plex_runtime_log.md</span></span></code></pre><p>If you like, you can fully configure your first export into the zip file. The <code>plex.backapp</code> method has boolean parameters, so you need to use an inline function in a pure SQL context. You can also use an anonymous PL/SQL block or you create a small SQL wrapper for the method like the inline function of the example. All parameters are optional and listed here with their default values:<pre class="giallo z-code"><code data-lang=sql><span class=giallo-l><span class="z-punctuation z-definition z-comment z-comment">-- Inline function because of boolean parameters (needs Oracle 12c or higher).</span></span>
<span class=giallo-l><span class="z-punctuation z-definition z-comment z-comment">-- Alternative create a helper function and call that in a SQL context.</span></span>
<span class=giallo-l><span class=z-keyword>WITH</span></span>
<span class=giallo-l><span class=z-keyword>  FUNCTION</span><span class=z-source> backapp </span><span class=z-keyword>RETURN</span><span class=z-source> BLOB </span><span class=z-keyword>IS</span></span>
<span class=giallo-l><span class=z-keyword>  BEGIN</span></span>
<span class=giallo-l><span class=z-keyword>    RETURN</span><span class=z-source> plex.to_zip(plex.backapp(</span></span>
<span class=giallo-l><span class="z-punctuation z-definition z-comment z-comment">      -- All parameters are optional and shown with their defaults</span></span>
<span class=giallo-l><span class="z-punctuation z-definition z-comment z-comment">      -- APEX App (only available, when APEX is installed):</span></span>
<span class=giallo-l><span class=z-source>      p_app_id                      </span><span class="z-keyword z-operator">=></span><span class=z-keyword> null</span><span class=z-source>,  </span><span class="z-punctuation z-definition z-comment z-comment">-- If null, we simply skip the APEX app export.</span></span>
<span class=giallo-l><span class=z-source>      p_app_date                    </span><span class="z-keyword z-operator">=></span><span class=z-source> true,  </span><span class="z-punctuation z-definition z-comment z-comment">-- If true, include export date and time in the result.</span></span>
<span class=giallo-l><span class=z-source>      p_app_public_reports          </span><span class="z-keyword z-operator">=></span><span class=z-source> true,  </span><span class="z-punctuation z-definition z-comment z-comment">-- If true, include public reports that a user saved.</span></span>
<span class=giallo-l><span class=z-source>      p_app_private_reports         </span><span class="z-keyword z-operator">=></span><span class=z-source> false, </span><span class="z-punctuation z-definition z-comment z-comment">-- If true, include private reports that a user saved.</span></span>
<span class=giallo-l><span class=z-source>      p_app_notifications           </span><span class="z-keyword z-operator">=></span><span class=z-source> false, </span><span class="z-punctuation z-definition z-comment z-comment">-- If true, include report notifications.</span></span>
<span class=giallo-l><span class=z-source>      p_app_translations            </span><span class="z-keyword z-operator">=></span><span class=z-source> true,  </span><span class="z-punctuation z-definition z-comment z-comment">-- If true, include application translation mappings and all text from the translation repository.</span></span>
<span class=giallo-l><span class=z-source>      p_app_pkg_app_mapping         </span><span class="z-keyword z-operator">=></span><span class=z-source> false, </span><span class="z-punctuation z-definition z-comment z-comment">-- If true, export installed packaged applications with references to the packaged application definition. If FALSE, export them as normal applications.</span></span>
<span class=giallo-l><span class=z-source>      p_app_original_ids            </span><span class="z-keyword z-operator">=></span><span class=z-source> false, </span><span class="z-punctuation z-definition z-comment z-comment">-- If true, export with the IDs as they were when the application was imported.</span></span>
<span class=giallo-l><span class=z-source>      p_app_subscriptions           </span><span class="z-keyword z-operator">=></span><span class=z-source> true,  </span><span class="z-punctuation z-definition z-comment z-comment">-- If true, components contain subscription references.</span></span>
<span class=giallo-l><span class=z-source>      p_app_comments                </span><span class="z-keyword z-operator">=></span><span class=z-source> true,  </span><span class="z-punctuation z-definition z-comment z-comment">-- If true, include developer comments.</span></span>
<span class=giallo-l><span class=z-source>      p_app_supporting_objects      </span><span class="z-keyword z-operator">=></span><span class=z-keyword> null</span><span class=z-source>,  </span><span class="z-punctuation z-definition z-comment z-comment">-- If 'Y', export supporting objects. If 'I', automatically install on import. If 'N', do not export supporting objects. If null, the application's include in export deployment value is used.</span></span>
<span class=giallo-l><span class=z-source>      p_app_include_single_file     </span><span class="z-keyword z-operator">=></span><span class=z-source> false, </span><span class="z-punctuation z-definition z-comment z-comment">-- If true, the single sql install file is also included beside the splitted files.</span></span>
<span class=giallo-l><span class=z-source>      p_app_build_status_run_only   </span><span class="z-keyword z-operator">=></span><span class=z-source> false, </span><span class="z-punctuation z-definition z-comment z-comment">-- If true, the build status of the app will be overwritten to RUN_ONLY.</span></span>
<span class=giallo-l><span class="z-punctuation z-definition z-comment z-comment">      -- ORDS Modules (only available, when ORDS is installed):</span></span>
<span class=giallo-l><span class=z-source>      p_include_ords_modules        </span><span class="z-keyword z-operator">=></span><span class=z-source> false, </span><span class="z-punctuation z-definition z-comment z-comment">-- If true, include ORDS modules of current user/schema.</span></span>
<span class=giallo-l><span class="z-punctuation z-definition z-comment z-comment">      -- Schema Objects:</span></span>
<span class=giallo-l><span class=z-source>      p_include_object_ddl          </span><span class="z-keyword z-operator">=></span><span class=z-source> false, </span><span class="z-punctuation z-definition z-comment z-comment">-- If true, include DDL of current user/schema and all its objects.</span></span>
<span class=giallo-l><span class=z-source>      p_object_type_like            </span><span class="z-keyword z-operator">=></span><span class=z-keyword> null</span><span class=z-source>,  </span><span class="z-punctuation z-definition z-comment z-comment">-- A comma separated list of like expressions to filter the objects - example: '%BODY,JAVA%' will be translated to: ... from user_objects where ... and (object_type like '%BODY' escape '\' or object_type like 'JAVA%' escape '\').</span></span>
<span class=giallo-l><span class=z-source>      p_object_type_not_like        </span><span class="z-keyword z-operator">=></span><span class=z-keyword> null</span><span class=z-source>,  </span><span class="z-punctuation z-definition z-comment z-comment">-- A comma separated list of not like expressions to filter the objects - example: '%BODY,JAVA%' will be translated to: ... from user_objects where ... and (object_type not like '%BODY' escape '\' and object_type not like 'JAVA%' escape '\').</span></span>
<span class=giallo-l><span class=z-source>      p_object_name_like            </span><span class="z-keyword z-operator">=></span><span class=z-keyword> null</span><span class=z-source>,  </span><span class="z-punctuation z-definition z-comment z-comment">-- A comma separated list of like expressions to filter the objects - example: 'EMP%,DEPT%' will be translated to: ... from user_objects where ... and (object_name like 'EMP%' escape '\' or object_name like 'DEPT%' escape '\').</span></span>
<span class=giallo-l><span class=z-source>      p_object_name_not_like        </span><span class="z-keyword z-operator">=></span><span class=z-keyword> null</span><span class=z-source>,  </span><span class="z-punctuation z-definition z-comment z-comment">-- A comma separated list of not like expressions to filter the objects - example: 'EMP%,DEPT%' will be translated to: ... from user_objects where ... and (object_name not like 'EMP%' escape '\' and object_name not like 'DEPT%' escape '\').</span></span>
<span class=giallo-l><span class=z-source>      p_object_view_remove_col_list </span><span class="z-keyword z-operator">=></span><span class=z-source> true,  </span><span class="z-punctuation z-definition z-comment z-comment">-- If true, the outer column list, added by Oracle on views during compilation, is removed</span></span>
<span class=giallo-l><span class="z-punctuation z-definition z-comment z-comment">      -- Table Data:</span></span>
<span class=giallo-l><span class=z-source>      p_include_data                </span><span class="z-keyword z-operator">=></span><span class=z-source> false, </span><span class="z-punctuation z-definition z-comment z-comment">-- If true, include CSV data of each table.</span></span>
<span class=giallo-l><span class=z-source>      p_data_as_of_minutes_ago      </span><span class="z-keyword z-operator">=></span><span class="z-constant z-numeric"> 0</span><span class=z-source>,     </span><span class="z-punctuation z-definition z-comment z-comment">-- Read consistent data with the resulting timestamp(SCN).</span></span>
<span class=giallo-l><span class=z-source>      p_data_max_rows               </span><span class="z-keyword z-operator">=></span><span class="z-constant z-numeric"> 1000</span><span class=z-source>,  </span><span class="z-punctuation z-definition z-comment z-comment">-- Maximum number of rows per table.</span></span>
<span class=giallo-l><span class=z-source>      p_data_table_name_like        </span><span class="z-keyword z-operator">=></span><span class=z-keyword> null</span><span class=z-source>,  </span><span class="z-punctuation z-definition z-comment z-comment">-- A comma separated list of like expressions to filter the tables - example: 'EMP%,DEPT%' will be translated to: where ... and (table_name like 'EMP%' escape '\' or table_name like 'DEPT%' escape '\').</span></span>
<span class=giallo-l><span class=z-source>      p_data_table_name_not_like    </span><span class="z-keyword z-operator">=></span><span class=z-keyword> null</span><span class=z-source>,  </span><span class="z-punctuation z-definition z-comment z-comment">-- A comma separated list of not like expressions to filter the tables - example: 'EMP%,DEPT%' will be translated to: where ... and (table_name not like 'EMP%' escape '\' and table_name not like 'DEPT%' escape '\').</span></span>
<span class=giallo-l><span class="z-punctuation z-definition z-comment z-comment">      -- General Options:</span></span>
<span class=giallo-l><span class=z-source>      p_include_templates           </span><span class="z-keyword z-operator">=></span><span class=z-source> true,  </span><span class="z-punctuation z-definition z-comment z-comment">-- If true, include templates for README.md, export and install scripts.</span></span>
<span class=giallo-l><span class=z-source>      p_include_runtime_log         </span><span class="z-keyword z-operator">=></span><span class=z-source> true,  </span><span class="z-punctuation z-definition z-comment z-comment">-- If true, generate file plex_runtime_log.md with detailed runtime infos.</span></span>
<span class=giallo-l><span class=z-source>      p_include_error_log           </span><span class="z-keyword z-operator">=></span><span class=z-source> true,  </span><span class="z-punctuation z-definition z-comment z-comment">-- If true, generate file plex_error_log.md with detailed error messages.</span></span>
<span class=giallo-l><span class=z-source>      p_base_path_backend           </span><span class="z-keyword z-operator">=></span><span class="z-punctuation z-definition z-string z-string"> 'app_backend'</span><span class=z-source>,      </span><span class="z-punctuation z-definition z-comment z-comment">-- The base path in the project root for the Schema objects.</span></span>
<span class=giallo-l><span class=z-source>      p_base_path_frontend          </span><span class="z-keyword z-operator">=></span><span class="z-punctuation z-definition z-string z-string"> 'app_frontend'</span><span class=z-source>,     </span><span class="z-punctuation z-definition z-comment z-comment">-- The base path in the project root for the APEX app.</span></span>
<span class=giallo-l><span class=z-source>      p_base_path_web_services      </span><span class="z-keyword z-operator">=></span><span class="z-punctuation z-definition z-string z-string"> 'app_web_services'</span><span class=z-source>, </span><span class="z-punctuation z-definition z-comment z-comment">-- The base path in the project root for the ORDS modules.</span></span>
<span class=giallo-l><span class=z-source>      p_base_path_data              </span><span class="z-keyword z-operator">=></span><span class="z-punctuation z-definition z-string z-string"> 'app_data'</span><span class=z-source>));       </span><span class="z-punctuation z-definition z-comment z-comment">-- The base path in the project root for the table data.</span></span>
<span class=giallo-l><span class=z-keyword>  END</span><span class=z-source> backapp;</span></span>
<span class=giallo-l><span class=z-keyword>SELECT</span><span class=z-source> backapp </span><span class=z-keyword>FROM</span><span class=z-source> dual;</span></span></code></pre><p>ATTENTION: Exporting all database objects can take some time. I have seen huge runtime differences from 6 seconds for a small app up to several hundred seconds for big apps and/or slow databases. This is normally not the problem of PLEX. If you are interested in runtime statistics of PLEX, you can inspect the delivered <code>plex_runtime_log.md</code> in the root directory.<br> Also, the possibility to export the data of your tables into CSV files does not mean that you should do this without thinking about it. The main reason for me to implement this feature was to track changes on catalog tables by regularly calling this export feature with a sensitive table filter and max rows parameter as catalog data is often relevant in business logic.<p>If you have organized your app into multiple schemas as described in <a class=external href=https://www.salvis.com/blog/2018/07/18/the-pink-database-paradigm-pinkdb/ rel=external>The Pink Database Paradigm</a>, you may need to export database objects from more then one schema. This is no problem for <code>plex.backapp</code> as all parameters are optional - you can simply logon to your second or third schema and extract only the DDL for these schemas by omitting the <code>p_app_id</code> parameter and setting <code>p_include_object_ddl</code> to <code>true</code>. Then unload the DDL files into a different directory - for example <code>app_backend_schemaName</code>.<p>A last word: you should inspect all the exported files and scripts and check if this solution can work for you. If not, please let me know what is missing or what should be done in a different way …<p>Feedback is welcome - simply create a <a class=external href=https://github.com/ogobrecht/plex/issues/new rel=external>new issue</a> at the <a class=external href=https://github.com/ogobrecht/plex rel=external>GitHub project page</a><h2 id=next-steps>Next Steps</h2><p>It is up to you how you organize the version control repository and how often you export your APEX app or object DDL. I would follow the files first approach and extract the object DDL only ones to have a starting point. The APEX application needs regular exports - if you like, you can automate this.<p>Following the files first approach is sometimes not easy when you are using low code tools like <a class=external href=https://apex.oracle.com/quicksql/ rel=external>Quick SQL</a> and <a class=external href=https://docs.oracle.com/database/apex-18.1/HTMDB/using-blueprints.htm rel=external>Blueprint</a> in APEX or code generators like <a class=external href=https://github.com/OraMUC/table-api-generator rel=external>OraMUC’s Table API Generator</a>. There could be a need to regularly extract (maybe unknown) objects (not created by yourself) into version control to understand and document what you got from others (people or generators)…<p>If the directory structure provided by PLEX does not match your needs - no problem - you can align it. Simply loop over the returned file collection and do your necessary work - here an example:<pre class="giallo z-code"><code data-lang=sql><span class=giallo-l><span class=z-keyword>DECLARE</span></span>
<span class=giallo-l><span class=z-source>  l_files plex.tab_export_files; </span><span class="z-punctuation z-definition z-comment z-comment">-- before PLEX v2 it was apex_t_export_files</span></span>
<span class=giallo-l><span class=z-keyword>BEGIN</span></span>
<span class=giallo-l><span class=z-source>  l_files :</span><span class="z-keyword z-operator">=</span><span class=z-source> plex.backapp(p_app_id </span><span class="z-keyword z-operator">=></span><span class="z-constant z-numeric"> 100</span><span class=z-source>);</span></span>
<span class=giallo-l><span class=z-keyword>  FOR</span><span class=z-source> i </span><span class=z-keyword>IN</span><span class="z-constant z-numeric"> 1</span><span class=z-source>..l_files.count</span><span class=z-keyword> LOOP</span></span>
<span class=giallo-l><span class="z-punctuation z-definition z-comment z-comment">    -- relocate APEX app files from app_frontend to app_ui</span></span>
<span class=giallo-l><span class=z-keyword>    IF</span><span class=z-source> l_files(i).</span><span class=z-keyword>name LIKE</span><span class="z-punctuation z-definition z-string z-string"> 'app_frontend/%'</span><span class=z-keyword> THEN</span></span>
<span class=giallo-l><span class=z-source>      l_files(i).</span><span class=z-keyword>name</span><span class=z-source> :</span><span class="z-keyword z-operator">=</span><span class="z-support z-function"> replace</span><span class=z-source>(l_files(i).</span><span class=z-keyword>name</span><span class=z-source>, </span><span class="z-punctuation z-definition z-string z-string">'app_frontend/'</span><span class=z-source>, </span><span class="z-punctuation z-definition z-string z-string">'app_ui/'</span><span class=z-source>);</span></span>
<span class=giallo-l><span class=z-source>      l_files(i).contents :</span><span class="z-keyword z-operator">=</span><span class="z-support z-function"> replace</span><span class=z-source>(l_files(i).contents, </span><span class="z-punctuation z-definition z-string z-string">'prompt --app_frontend/'</span><span class=z-source>, </span><span class="z-punctuation z-definition z-string z-string">'prompt --app_ui/'</span><span class=z-source>);</span></span>
<span class=giallo-l><span class=z-keyword>    END IF</span><span class=z-source>;</span></span>
<span class=giallo-l><span class="z-punctuation z-definition z-comment z-comment">    -- correct file links in install script</span></span>
<span class=giallo-l><span class=z-keyword>    IF</span><span class=z-source> l_files(i).</span><span class=z-keyword>name</span><span class="z-keyword z-operator"> =</span><span class="z-punctuation z-definition z-string z-string"> 'scripts/install_frontend_generated_by_apex.sql'</span><span class=z-keyword> THEN</span></span>
<span class=giallo-l><span class=z-source>      l_files(i).contents :</span><span class="z-keyword z-operator">=</span><span class="z-support z-function"> replace</span><span class=z-source>(l_files(i).contents, </span><span class="z-punctuation z-definition z-string z-string">'@../app_frontend/'</span><span class=z-source>, </span><span class="z-punctuation z-definition z-string z-string">'@../app_ui/'</span><span class=z-source>);</span></span>
<span class=giallo-l><span class=z-keyword>    END IF</span><span class=z-source>;</span></span>
<span class=giallo-l><span class=z-keyword>  END LOOP</span><span class=z-source>;</span></span>
<span class=giallo-l></span>
<span class=giallo-l><span class="z-punctuation z-definition z-comment z-comment">  -- more alignments...</span></span>
<span class=giallo-l><span class=z-keyword>END</span><span class=z-source>;</span></span></code></pre><p>For unloading the resulting file collection with SQL*Plus, please have a look in the <code>scripts/templates</code> folder of your export - there are examples to do this. See also my previous post on <a href=/blog/apex-export-and-version-control/>how to handle the apex_t_export_files type returned by the APEX_EXPORT package with SQL*Plus</a>.<p>Some people prefer to devide their DDL scripts into the two categories <strong>restartable</strong> (like packages) and <strong>run once</strong> (like tables). Others like to have their scripts in a way that they are always restartable and the DDL script itself takes care about doing the work only once when needed. The advantage of the second way is that your backend install/deployment script is always the same and it simply calls all objects DDL scripts.<p>There is no right or wrong in doing it this or that way - each project/team has its specific requirements and history. The important thing is, that you start to use a version control system to be able to log your changes and document your code.<p>By the way - PLEX provides script templates and object DDL that follows the second approach: You can always have the same install/deployment script and the DDL scripts are restartable - check it out by looking in one of your exported table DDL scripts.<p>You are now at the point where PLEX can’t do anything more for you. If you like to export your object DDL scripts more often, you have to find a way to be able to protect some of your scripts against overwriting. Imagine you had to add two columns to a table and you provided a restartable alter statement for this in the existing DDL script. If you export this table script the next time with PLEX (or with dbms_metadata.get_ddl, which is used in the background), your alter statements are gone and the new columns are simply listed in the create table statement. With this script you are not be able to deploy your changes to TEST or PROD.<br> One solution is to copy the original table script and name it e.g. <code>EMPLOYEES.dev.sql</code>. In this script you maintain the restartable alter statements. If you run <code>plex.backapp</code> again you are overwrite save. The script <code>EMPLOYEES.sql</code> reflects your current table definition and can still be executed - it does nothing because the table is already existing. The script <code>EMPLOYEES.dev.sql</code> reflects your development history and need to be added to your custom install/deployment script.<p>As you can see, PLEX can do only the basics for you. It is up to the developers how they manage their version control repository and how they do their deployments - there are thousends of ways to do it …<h2 id=inspirations-further-reading>Inspirations / Further Reading</h2><p>Thanks are going to:<ul><li>André Borngräber for his ability to think and discuss database topics in deep details<li>Blain Carter for his thoughts on <a class=external href=https://learncodeshare.net/2018/07/16/ci-cd-for-database-developers-export-database-objects-into-version-control/ rel=external>CI/CD for Database Developers – Export Database Objects into Version Control</a><li>Markus Dötsch for the first BackApp tests and cross-reading the first version of this post<li>Martin D’Souza for his time and the interesting discussion about code generation and version control at the APEX Connect 2018 in Düsseldorf, Germany and his blog post <a class=external href=https://www.talkapex.com/2018/07/exporting-apex-application-in-sqlcl-with-build-status-override/ rel=external>Exporting APEX Application in SQLcl with Build Status Override</a> - <code>plex.backapp</code> has now a parameter for this ;-)<li>Philipp Salvisberg for his thoughts on <a class=external href=https://www.salvis.com/blog/2018/07/18/the-pink-database-paradigm-pinkdb/ rel=external>The Pink Database Paradigm</a><li>Samuel Nitsche for his thoughts on <a class=external href=https://cleandatabase.wordpress.com/2017/09/22/there-is-no-clean-database-development-without-version-control/ rel=external>There is no clean (database) development without Version Control</a><li>Tim Hall for his article about <a class=external href=https://oracle-base.com/articles/9i/generating-csv-files rel=external>Generating CSV Files</a></ul><h2 id=thats-it>Thats It</h2><p>Hopefully PLEX is usefull for someone else.<p>Happy coding, apexing, version controlling :-)<p>Ottmar</section><nav class="full-width article-navigation"><div><a aria-describedby=left_title aria-label=Prev href=https://ogobrecht.com/blog/apex-export-and-version-control/><span class=arrow>←</span> Prev</a><p aria-hidden=true id=left_title>APEX_EXPORT and Version Control</div><div><a aria-describedby=right_title aria-label=Next href=https://ogobrecht.com/blog/new-major-version-of-d3-force-network-chart-available/>Next <span class=arrow>→</span></a><p aria-hidden=true id=right_title>New Major Version of D3 Force Network Chart Available</div></nav><div data-repo-id="MDEwOlJlcG9zaXRvcnkzMjEzNzI3MzE=" class=comments data-category=General data-category-id=DIC_kwDOEyfCO84C0uh1 data-dark-theme=noborder_dark data-input-position=bottom data-lang=en data-lazy-loading=true data-light-theme=noborder_light data-mapping=specific data-reactions-enabled=0 data-repo=ogobrecht/ogobrecht.com data-strict=1 data-term=plex-plsql-export-utilities id=comments><script async src=https://ogobrecht.com/js/giscus.min.js></script><noscript>You need JavaScript to view the comments.</noscript></div></article></main><div id=button-container><div id=toc-floating-container><input class=toggle id=toc-toggle type=checkbox><label title="Toggle Table of Contents" class=button for=toc-toggle id=toc-button><svg viewbox="0 -960 960 960" xmlns=http://www.w3.org/2000/svg><path d="M414.82-193.094q-18.044 0-30.497-12.32-12.453-12.319-12.453-30.036t12.453-30.086q12.453-12.37 30.497-12.37h392.767q17.237 0 29.927 12.487 12.69 12.486 12.69 30.203 0 17.716-12.69 29.919t-29.927 12.203H414.82Zm0-244.833q-18.044 0-30.497-12.487Q371.87-462.9 371.87-480.45t12.453-29.92q12.453-12.369 30.497-12.369h392.767q17.237 0 29.927 12.511 12.69 12.512 12.69 29.845 0 17.716-12.69 30.086-12.69 12.37-29.927 12.37H414.82Zm0-245.167q-18.044 0-30.497-12.32t-12.453-30.037q0-17.716 12.453-30.086 12.453-12.369 30.497-12.369h392.767q17.237 0 29.927 12.486 12.69 12.487 12.69 30.203 0 17.717-12.69 29.92-12.69 12.203-29.927 12.203H414.82ZM189.379-156.681q-32.652 0-55.878-22.829t-23.226-55.731q0-32.549 23.15-55.647 23.151-23.097 55.95-23.097 32.799 0 55.313 23.484 22.515 23.484 22.515 56.246 0 32.212-22.861 54.893-22.861 22.681-54.963 22.681Zm0-245.167q-32.652 0-55.878-23.134-23.226-23.135-23.226-55.623 0-32.487 23.467-55.517t56.12-23.03q32.102 0 54.721 23.288 22.62 23.288 22.62 55.775 0 32.488-22.861 55.364-22.861 22.877-54.963 22.877Zm-.82-244.833q-32.224 0-55.254-23.288-23.03-23.289-23.03-55.623 0-32.333 23.271-55.364 23.272-23.03 55.495-23.03 32.224 0 55.193 23.288 22.969 23.289 22.969 55.622 0 32.334-23.21 55.364-23.21 23.031-55.434 23.031Z"/></svg></label><div class=toc-content><div class=toc-container><ul><li><a href=https://ogobrecht.com/blog/plex-plsql-export-utilities/#getting-started>Getting Started</a><li><a href=https://ogobrecht.com/blog/plex-plsql-export-utilities/#next-steps>Next Steps</a><li><a href=https://ogobrecht.com/blog/plex-plsql-export-utilities/#inspirations-further-reading>Inspirations / Further Reading</a><li><a href=https://ogobrecht.com/blog/plex-plsql-export-utilities/#thats-it>Thats It</a></ul></div></div></div><a title="Go to the comments section" class=no-hover-padding href=#comments id=comments-button> <svg viewbox="0 0 20 20" fill=currentColor><path d="M18 10c0 3.866-3.582 7-8 7a8.841 8.841 0 01-4.083-.98L2 17l1.338-3.123C2.493 12.767 2 11.434 2 10c0-3.866 3.582-7 8-7s8 3.134 8 7zM7 9H5v2h2V9zm8 0h-2v2h2V9zM9 9h2v2H9V9z" clip-rule=evenodd fill-rule=evenodd /></svg> </a><a title="Go to the top of the page" class=no-hover-padding href=# id=top-button> <svg viewbox="0 0 20 20" fill=currentColor><path d="M3.293 9.707a1 1 0 010-1.414l6-6a1 1 0 011.414 0l6 6a1 1 0 01-1.414 1.414L11 5.414V17a1 1 0 11-2 0V5.414L4.707 9.707a1 1 0 01-1.414 0z"/></svg> </a></div><span class=hidden id=copy-success> Copied! </span><span class=hidden id=copy-init> Copy code to clipboard </span><script defer src=https://ogobrecht.com/js/copyCodeToClipboard.min.js></script></div><footer><section><nav class="socials nav-navs"><ul><li><a class="nav-links no-hover-padding social" href=https://ogobrecht.com/atom.xml> <img alt=feed loading=lazy src=https://ogobrecht.com/social_icons/rss.svg title=feed> </a><li><a class="nav-links no-hover-padding social" rel=" me" href=https://github.com/ogobrecht> <img alt=GitHub loading=lazy src=https://ogobrecht.com/social_icons/github.svg title=GitHub> </a><li><a class="nav-links no-hover-padding social" rel=" me" href=https://bsky.app/profile/ogobrecht.com> <img alt=Bluesky loading=lazy src=https://ogobrecht.com/social_icons/bluesky.svg title=Bluesky> </a><li><a class="nav-links no-hover-padding social" rel=" me" href=https://www.linkedin.com/in/ogobrecht/> <img alt=LinkedIn loading=lazy src=https://ogobrecht.com/social_icons/linkedin.svg title=LinkedIn> </a><li><a class="nav-links no-hover-padding social" rel=" me" href=mailto:ottmar.gobrecht@gmail.com> <img alt=Email loading=lazy src=https://ogobrecht.com/social_icons/email.svg title=Email> </a></ul></nav><nav class=nav-navs><small> <ul><li><a class="nav-links no-hover-padding" href=https://ogobrecht.com/imprint/> imprint </a><li><a class="nav-links no-hover-padding" href=https://ogobrecht.com/privacy/> privacy policy </a><li><a class="nav-links no-hover-padding" href=https://ogobrecht.com/sitemap.xml> sitemap </a></ul> </small></nav><div class=credits><small> Powered by <a href=https://www.getzola.org>Zola</a> & <a href=https://github.com/welpo/tabi>tabi</a> </small></div></section><div class="search-modal js" aria-labelledby=modalTitle id=searchModal role=dialog><h1 class=visually-hidden id=modalTitle>Search</h1><div id=modal-content><div id=searchBar><div aria-hidden=true class=search-icon><svg viewbox="0 -960 960 960" xmlns=http://www.w3.org/2000/svg><path d="M784-120 532-372q-30 24-69 38t-83 14q-109 0-184.5-75.5T120-580q0-109 75.5-184.5T380-840q109 0 184.5 75.5T640-580q0 44-14 83t-38 69l252 252-56 56ZM380-400q75 0 127.5-52.5T560-580q0-75-52.5-127.5T380-760q-75 0-127.5 52.5T200-580q0 75 52.5 127.5T380-400Z"/></svg></div><input aria-controls=results-container aria-expanded=false autocomplete=off id=searchInput placeholder=Search… role=combobox spellcheck=false><div class="close-icon interactive-icon" title="Clear search" id=clear-search role=button tabindex=0><svg viewbox="0 -960 960 960" xmlns=http://www.w3.org/2000/svg><path d="m256-200-56-56 224-224-224-224 56-56 224 224 224-224 56 56-224 224 224 224-56 56-224-224-224 224Z"/></svg></div></div><div id=results-container><div id=results-info><span id=zero_results> No results</span><span id=one_results> $NUMBER result</span><span id=many_results> $NUMBER results</span><span id=two_results> $NUMBER results</span><span id=few_results> $NUMBER results</span></div><div id=results role=listbox></div></div></div></div></footer>