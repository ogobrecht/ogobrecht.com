<!doctype html><html lang=en><head><meta charset=UTF-8><meta content="default-src 'self';font-src 'self' data:;img-src 'self' https://* data:;media-src 'self';style-src 'self';frame-src player.vimeo.com https://www.youtube-nocookie.com giscus.app;connect-src 'self';script-src 'self'  giscus.app 'self'" http-equiv=Content-Security-Policy><meta content="width=device-width,initial-scale=1.0" name=viewport><meta content=https://ogobrecht.com name=base><title>
Ottmar’s Notes • Create fast insert scripts</title><link href=https://ogobrecht.com/img/avatar.png rel=icon type=image/png><link title="Ottmar’s Notes - Atom Feed" href=https://ogobrecht.com/atom.xml rel=alternate type=application/atom+xml><link href="https://ogobrecht.com/custom_subset.css?h=0b9535a28bc3d5bf2321" rel=stylesheet><link href="https://ogobrecht.com/main.css?h=3716ab3457d2dd050b3c" rel=stylesheet><meta content="light dark" name=color-scheme><meta content="PL/SQL Export Utilities are now able to export table data as insert scripts" name=description><meta content="PL/SQL Export Utilities are now able to export table data as insert scripts" property=og:description><meta content="Create fast insert scripts" property=og:title><meta content=article property=og:type><meta content=en_GB property=og:locale><meta content=https://ogobrecht.com/blog/create-fast-insert-scripts/ property=og:url><meta content="Ottmar’s Notes" property=og:site_name><noscript><link href=https://ogobrecht.com/no_js.css rel=stylesheet></noscript><script src=https://ogobrecht.com/js/initializeTheme.min.js></script><script defer src=https://ogobrecht.com/js/themeSwitcher.min.js></script><script src="https://ogobrecht.com/js/searchElasticlunr.min.js?h=3626c0ef99daa745b31e" defer></script><body><a href=#main-content id=skip-link>Skip to content</a><header><nav class=navbar><div class=nav-title><a class=home-title href=https://ogobrecht.com/>Ottmar’s Notes</a></div><div class=nav-navs><ul><li><a class="nav-links no-hover-padding" href=https://ogobrecht.com/blog/>blog </a><li><a class="nav-links no-hover-padding" href=https://ogobrecht.com/archive/>archive </a><li><a class="nav-links no-hover-padding" href=https://ogobrecht.com/tags/>tags </a><li><a class="nav-links no-hover-padding" href=https://ogobrecht.com/projects/>projects </a><li class=menu-icons-container><ul class=menu-icons-group><li class="js menu-icon"><div aria-label="Click or press $SHORTCUT to open search" class="search-icon interactive-icon" title="Click or press $SHORTCUT to open search" id=search-button role=button tabindex=0><svg viewbox="0 -960 960 960" xmlns=http://www.w3.org/2000/svg><path d="M784-120 532-372q-30 24-69 38t-83 14q-109 0-184.5-75.5T120-580q0-109 75.5-184.5T380-840q109 0 184.5 75.5T640-580q0 44-14 83t-38 69l252 252-56 56ZM380-400q75 0 127.5-52.5T560-580q0-75-52.5-127.5T380-760q-75 0-127.5 52.5T200-580q0 75 52.5 127.5T380-400Z"/></svg></div><li class="theme-switcher-wrapper js"><div aria-label="Toggle dark mode" title="Toggle dark/light mode" aria-pressed=false class=theme-switcher role=button tabindex=0></div><div aria-label="Reset mode to default" class="theme-resetter arrow" title="Reset mode to default" aria-hidden=true role=button tabindex=0></div></ul></ul></div></nav></header><div class=content id=main-content><main><article class=h-entry><h1 class="p-name article-title">Create fast insert scripts</h1><a class="u-url u-uid" href=https://ogobrecht.com/blog/create-fast-insert-scripts/></a><ul class=meta><span class="hidden p-author h-card"> <a title="Ottmar Gobrecht" class=u-url href=https://ogobrecht.com rel=author>Ottmar Gobrecht</a> </span><li><time class=dt-published datetime=2021-01-31>31st Jan 2021</time><li title="473 words"><span aria-hidden=true class=separator>•</span>3 min read<li class=tag><span aria-hidden=true class=separator>•</span>Tags: <li class=tag><a class=p-category href=https://ogobrecht.com/tags/oracle/>Oracle</a>, <li class=tag><a class=p-category href=https://ogobrecht.com/tags/script/>Script</a>, <li class=tag><a class=p-category href=https://ogobrecht.com/tags/generator/>Generator</a></ul><p class=p-summary hidden>PL/SQL Export Utilities are now able to export table data as insert scripts<section class="e-content body"><p>A few weeks ago I released a new version of my <a class=external href=https://github.com/ogobrecht/plex>PLEX project</a>. I improved the ability to export table data as insert scripts. Previously, PLEX was only able to export CSV data. The reason was that I originally developed PLEX to speed up the implementation of version control in Oracle DB projects, and the ability to export CSV data was intended to track changes in master data tables.<p>It turned out that a colleague of mine wanted PLEX to export insert scripts for all data in all tables for the initial deployment of a new application. I implemented an initial version, but was not happy with the runtime of the insert scripts. I now hear some people arguing that there are better tools than insert scripts for importing larger amounts of data - but sometimes this is the only accepted way because only SQL*Plus is available to run the deployment scripts….<p>Then I stumbled across an older post by <a class=external href=https://connor-mcdonald.com/2019/05/17/hacking-together-faster-inserts/>Connor McDonald on creating fast insert scripts</a>. I have integrated his performance hacks into PLEX.<p>You can use them as follows (see last parameter):<pre class="language-sql z-code" data-lang=sql><code class=language-sql data-lang=sql><span class="z-source z-sql">declare
</span><span class="z-source z-sql">  l_zip_file blob;
</span><span class="z-source z-sql"><span class="z-keyword z-other z-LUW z-sql">begin</span>
</span><span class="z-source z-sql">  l_zip_file :<span class="z-keyword z-operator z-comparison z-sql">=</span> <span class="z-constant z-other z-database-name z-sql">plex</span>.<span class="z-constant z-other z-table-name z-sql">to_zip</span>(<span class="z-constant z-other z-database-name z-sql">plex</span>.<span class="z-constant z-other z-table-name z-sql">backapp</span>(
</span><span class="z-source z-sql">    p_app_id                   <span class="z-keyword z-operator z-comparison z-sql">=</span><span class="z-keyword z-operator z-comparison z-sql">></span> <span class="z-constant z-numeric z-sql">100</span>,  <span class="z-comment z-line z-double-dash z-sql"><span class="z-punctuation z-definition z-comment z-sql">--</span> parameter only available when APEX is installed
</span></span><span class="z-source z-sql">    p_include_ords_modules     <span class="z-keyword z-operator z-comparison z-sql">=</span><span class="z-keyword z-operator z-comparison z-sql">></span> <span class="z-constant z-boolean z-sql">true</span>, <span class="z-comment z-line z-double-dash z-sql"><span class="z-punctuation z-definition z-comment z-sql">--</span> parameter only available when ORDS is installed
</span></span><span class="z-source z-sql">    p_include_object_ddl       <span class="z-keyword z-operator z-comparison z-sql">=</span><span class="z-keyword z-operator z-comparison z-sql">></span> <span class="z-constant z-boolean z-sql">true</span>,
</span><span class="z-source z-sql">    p_include_data             <span class="z-keyword z-operator z-comparison z-sql">=</span><span class="z-keyword z-operator z-comparison z-sql">></span> <span class="z-constant z-boolean z-sql">true</span>,
</span><span class="z-source z-sql">    p_data_as_of_minutes_ago   <span class="z-keyword z-operator z-comparison z-sql">=</span><span class="z-keyword z-operator z-comparison z-sql">></span> <span class="z-constant z-numeric z-sql">0</span>,     <span class="z-comment z-line z-double-dash z-sql"><span class="z-punctuation z-definition z-comment z-sql">--</span> Read consistent data with the resulting timestamp (SCN). Defaults to 0.
</span></span><span class="z-source z-sql">    p_data_max_rows            <span class="z-keyword z-operator z-comparison z-sql">=</span><span class="z-keyword z-operator z-comparison z-sql">></span> <span class="z-constant z-numeric z-sql">10000</span>, <span class="z-comment z-line z-double-dash z-sql"><span class="z-punctuation z-definition z-comment z-sql">--</span> Maximum number of rows per table. Defaults to 1000.
</span></span><span class="z-source z-sql">    p_data_table_name_like     <span class="z-keyword z-operator z-comparison z-sql">=</span><span class="z-keyword z-operator z-comparison z-sql">></span> <span class="z-string z-quoted z-single z-sql"><span class="z-punctuation z-definition z-string z-begin z-sql">'</span>CAT<span class="z-constant z-character z-escape z-sql">\_</span>%,USERS,ROLES,RIGHTS<span class="z-punctuation z-definition z-string z-end z-sql">'</span></span>,
</span><span class="z-source z-sql">    p_data_table_name_not_like <span class="z-keyword z-operator z-comparison z-sql">=</span><span class="z-keyword z-operator z-comparison z-sql">></span> <span class="z-string z-quoted z-single z-sql"><span class="z-punctuation z-definition z-string z-begin z-sql">'</span>%<span class="z-constant z-character z-escape z-sql">\_</span>HIST,LOGGER%<span class="z-punctuation z-definition z-string z-end z-sql">'</span></span>,
</span><span class="z-source z-sql">    p_data_format              <span class="z-keyword z-operator z-comparison z-sql">=</span><span class="z-keyword z-operator z-comparison z-sql">></span> <span class="z-string z-quoted z-single z-sql"><span class="z-punctuation z-definition z-string z-begin z-sql">'</span>insert:10<span class="z-punctuation z-definition z-string z-end z-sql">'</span></span>));
</span><span class="z-source z-sql">
</span><span class="z-source z-sql">  <span class="z-comment z-line z-double-dash z-sql"><span class="z-punctuation z-definition z-comment z-sql">--</span> Do something with the zip file.
</span></span><span class="z-source z-sql">  <span class="z-comment z-line z-double-dash z-sql"><span class="z-punctuation z-definition z-comment z-sql">--</span> Your code here...
</span></span><span class="z-source z-sql"><span class="z-keyword z-other z-DML z-sql">end</span>;
</span><span class="z-source z-sql"><span class="z-keyword z-operator z-math z-sql">/</span>
</span></code></pre><p>The <code>p_data_format</code> parameter is new and can contain a comma-separated list of formats - currently the CSV and INSERT formats are supported. An example: <code>csv,insert</code> exports for each table a CSV file and a SQL file with insert statements. For insert you can also specify the number of rows per <code>insert all</code> statement (default value is 20) - example: <code>csv,insert:10</code> or <code>insert:5</code>.<p>As you can see from the <code>p_data_table_name_not_like => '%\_HIST,LOGGER%'</code> parameter, PLEX also accepts lists with like filters. In our example <code>%\_HIST,LOGGER%</code> is translated to:<pre class="language-sql z-code" data-lang=sql><code class=language-sql data-lang=sql><span class="z-source z-sql"><span class="z-keyword z-other z-DML z-sql">where</span> ...
</span><span class="z-source z-sql">  <span class="z-keyword z-operator z-logical z-sql">and</span> (    table_name not <span class="z-keyword z-operator z-logical z-sql">like</span> <span class="z-string z-quoted z-single z-sql"><span class="z-punctuation z-definition z-string z-begin z-sql">'</span>%<span class="z-constant z-character z-escape z-sql">\_</span>HIST<span class="z-punctuation z-definition z-string z-end z-sql">'</span></span> escape <span class="z-string z-quoted z-single z-sql"><span class="z-punctuation z-definition z-string z-begin z-sql">'</span><span class="z-constant z-character z-escape z-sql">\'</span>
</span></span><span class="z-source z-sql"><span class="z-string z-quoted z-single z-sql">       and table_name not like <span class="z-punctuation z-definition z-string z-end z-sql">'</span></span>LOGGER%<span class="z-string z-quoted z-single z-sql"><span class="z-punctuation z-definition z-string z-begin z-sql">'</span> escape <span class="z-punctuation z-definition z-string z-end z-sql">'</span></span>\<span class="z-string z-quoted z-single z-sql"><span class="z-punctuation z-definition z-string z-begin z-sql">'</span>
</span></span><span class="z-source z-sql"><span class="z-string z-quoted z-single z-sql">       and ...
</span></span><span class="z-source z-sql"><span class="z-string z-quoted z-single z-sql">      )
</span></span></code></pre><p>For the parameter <code>p_data_table_name_like => 'CAT\_%,USERS,ROLES,RIGHTS'</code> the tables are filtered as follows:<pre class="language-sql z-code" data-lang=sql><code class=language-sql data-lang=sql><span class="z-source z-sql"><span class="z-keyword z-other z-DML z-sql">where</span> ...
</span><span class="z-source z-sql">  <span class="z-keyword z-operator z-logical z-sql">and</span> (   table_name <span class="z-keyword z-operator z-logical z-sql">like</span> <span class="z-string z-quoted z-single z-sql"><span class="z-punctuation z-definition z-string z-begin z-sql">'</span>CAT<span class="z-constant z-character z-escape z-sql">\_</span>%<span class="z-punctuation z-definition z-string z-end z-sql">'</span></span> escape <span class="z-string z-quoted z-single z-sql"><span class="z-punctuation z-definition z-string z-begin z-sql">'</span><span class="z-constant z-character z-escape z-sql">\'</span>
</span></span><span class="z-source z-sql"><span class="z-string z-quoted z-single z-sql">       or table_name like <span class="z-punctuation z-definition z-string z-end z-sql">'</span></span>USERS<span class="z-string z-quoted z-single z-sql"><span class="z-punctuation z-definition z-string z-begin z-sql">'</span>  escape <span class="z-punctuation z-definition z-string z-end z-sql">'</span></span>\<span class="z-string z-quoted z-single z-sql"><span class="z-punctuation z-definition z-string z-begin z-sql">'</span>
</span></span><span class="z-source z-sql"><span class="z-string z-quoted z-single z-sql">       or ...
</span></span><span class="z-source z-sql"><span class="z-string z-quoted z-single z-sql">      )
</span></span></code></pre><p>There is a good reason why the default <code>p_data_max_rows</code> parameter is set to <code>1000</code> - if you don’t specify table name filters, all tables will be exported…<p>The resulting insert scripts look like this:<pre class="language-sql z-code" data-lang=sql><code class=language-sql data-lang=sql><span class="z-source z-sql"><span class="z-comment z-line z-double-dash z-sql"><span class="z-punctuation z-definition z-comment z-sql">--</span> Script generated by PLEX version 2.4.2 - more infos here: https://github.com/ogobrecht/plex
</span></span><span class="z-source z-sql"><span class="z-comment z-line z-double-dash z-sql"><span class="z-punctuation z-definition z-comment z-sql">--</span> Performance Hacks by Connor McDonald: https://connor-mcdonald.com/2019/05/17/hacking-together-faster-inserts/
</span></span><span class="z-source z-sql"><span class="z-comment z-line z-double-dash z-sql"><span class="z-punctuation z-definition z-comment z-sql">--</span> For strange line end replacements a big thank to SQL*Plus: https://support.oracle.com/epmos/faces/DocumentDisplay?id=2377701.1 (SQL Failed With ORA-1756 In Sqlplus But Works In SQL Developer)
</span></span><span class="z-source z-sql">prompt <span class="z-keyword z-operator z-math z-sql">-</span> <span class="z-keyword z-other z-DML z-sql">insert</span> <span class="z-constant z-numeric z-sql">847</span> rows into USERS (exported <span class="z-constant z-numeric z-sql">2021</span><span class="z-keyword z-operator z-math z-sql">-</span><span class="z-constant z-numeric z-sql">01</span><span class="z-keyword z-operator z-math z-sql">-</span><span class="z-constant z-numeric z-sql">31</span> <span class="z-constant z-numeric z-sql">14</span>:<span class="z-constant z-numeric z-sql">24</span>:<span class="z-constant z-numeric z-sql">30</span>.<span class="z-constant z-numeric z-sql">703234000</span> <span class="z-keyword z-operator z-math z-sql">+</span><span class="z-constant z-numeric z-sql">00</span>:<span class="z-constant z-numeric z-sql">00</span>)
</span><span class="z-source z-sql"><span class="z-keyword z-other z-DML z-sql">set</span> define off feedback off sqlblanklines on
</span><span class="z-source z-sql">alter session <span class="z-keyword z-other z-DML z-sql">set</span> cursor_sharing          <span class="z-keyword z-operator z-comparison z-sql">=</span> force;
</span><span class="z-source z-sql">alter session <span class="z-keyword z-other z-DML z-sql">set</span> nls_numeric_characters  <span class="z-keyword z-operator z-comparison z-sql">=</span> <span class="z-string z-quoted z-single z-sql"><span class="z-punctuation z-definition z-string z-begin z-sql">'</span>.,<span class="z-punctuation z-definition z-string z-end z-sql">'</span></span>;
</span><span class="z-source z-sql">alter session <span class="z-keyword z-other z-DML z-sql">set</span> nls_date_format         <span class="z-keyword z-operator z-comparison z-sql">=</span> <span class="z-string z-quoted z-single z-sql"><span class="z-punctuation z-definition z-string z-begin z-sql">'</span>yyyy-mm-dd hh24:mi:ss<span class="z-punctuation z-definition z-string z-end z-sql">'</span></span>;
</span><span class="z-source z-sql">alter session <span class="z-keyword z-other z-DML z-sql">set</span> nls_timestamp_format    <span class="z-keyword z-operator z-comparison z-sql">=</span> <span class="z-string z-quoted z-single z-sql"><span class="z-punctuation z-definition z-string z-begin z-sql">'</span>yyyy-mm-dd hh24:mi:ssxff<span class="z-punctuation z-definition z-string z-end z-sql">'</span></span>;
</span><span class="z-source z-sql">alter session <span class="z-keyword z-other z-DML z-sql">set</span> nls_timestamp_tz_format <span class="z-keyword z-operator z-comparison z-sql">=</span> <span class="z-string z-quoted z-single z-sql"><span class="z-punctuation z-definition z-string z-begin z-sql">'</span>yyyy-mm-dd hh24:mi:ssxff tzr<span class="z-punctuation z-definition z-string z-end z-sql">'</span></span>;
</span><span class="z-source z-sql"><span class="z-keyword z-other z-LUW z-sql">begin</span>
</span><span class="z-source z-sql"><span class="z-keyword z-other z-DML z-sql">insert</span> all
</span><span class="z-source z-sql">into USERS(U_ID,U_FIRST_NAME,U_LAST_NAME,U_EMAIL) <span class="z-keyword z-other z-DML z-II z-sql">values</span> (<span class="z-constant z-numeric z-sql">1</span>,<span class="z-string z-quoted z-single z-sql"><span class="z-punctuation z-definition z-string z-begin z-sql">'</span>Ylcmsajbil<span class="z-punctuation z-definition z-string z-end z-sql">'</span></span>,<span class="z-string z-quoted z-single z-sql"><span class="z-punctuation z-definition z-string z-begin z-sql">'</span>Fojkjryntnixzfh<span class="z-punctuation z-definition z-string z-end z-sql">'</span></span>,<span class="z-string z-quoted z-single z-sql"><span class="z-punctuation z-definition z-string z-begin z-sql">'</span>qvspjgvwmtbi@ghovilkddx.mly<span class="z-punctuation z-definition z-string z-end z-sql">'</span></span>)
</span><span class="z-source z-sql">into USERS(U_ID,U_FIRST_NAME,U_LAST_NAME,U_EMAIL) <span class="z-keyword z-other z-DML z-II z-sql">values</span> (<span class="z-constant z-numeric z-sql">2</span>,<span class="z-string z-quoted z-single z-sql"><span class="z-punctuation z-definition z-string z-begin z-sql">'</span>Axify<span class="z-punctuation z-definition z-string z-end z-sql">'</span></span>,<span class="z-string z-quoted z-single z-sql"><span class="z-punctuation z-definition z-string z-begin z-sql">'</span>Cofjlkwzxytdih<span class="z-punctuation z-definition z-string z-end z-sql">'</span></span>,<span class="z-string z-quoted z-single z-sql"><span class="z-punctuation z-definition z-string z-begin z-sql">'</span>ajgttnqlds@minokpyfo.gu<span class="z-punctuation z-definition z-string z-end z-sql">'</span></span>)
</span><span class="z-source z-sql">into USERS(U_ID,U_FIRST_NAME,U_LAST_NAME,U_EMAIL) <span class="z-keyword z-other z-DML z-II z-sql">values</span> (<span class="z-constant z-numeric z-sql">3</span>,<span class="z-string z-quoted z-single z-sql"><span class="z-punctuation z-definition z-string z-begin z-sql">'</span>Ckyqqvuqrkuktb<span class="z-punctuation z-definition z-string z-end z-sql">'</span></span>,<span class="z-string z-quoted z-single z-sql"><span class="z-punctuation z-definition z-string z-begin z-sql">'</span>Igacqwp<span class="z-punctuation z-definition z-string z-end z-sql">'</span></span>,<span class="z-string z-quoted z-single z-sql"><span class="z-punctuation z-definition z-string z-begin z-sql">'</span>qpygabuhbrs@nsjxpgjlle.ze<span class="z-punctuation z-definition z-string z-end z-sql">'</span></span>)
</span><span class="z-source z-sql">into USERS(U_ID,U_FIRST_NAME,U_LAST_NAME,U_EMAIL) <span class="z-keyword z-other z-DML z-II z-sql">values</span> (<span class="z-constant z-numeric z-sql">4</span>,<span class="z-string z-quoted z-single z-sql"><span class="z-punctuation z-definition z-string z-begin z-sql">'</span>Noythhl<span class="z-punctuation z-definition z-string z-end z-sql">'</span></span>,<span class="z-string z-quoted z-single z-sql"><span class="z-punctuation z-definition z-string z-begin z-sql">'</span>Gausfu<span class="z-punctuation z-definition z-string z-end z-sql">'</span></span>,<span class="z-string z-quoted z-single z-sql"><span class="z-punctuation z-definition z-string z-begin z-sql">'</span>ngmgsbr@duyxqzn.hmyo<span class="z-punctuation z-definition z-string z-end z-sql">'</span></span>)
</span><span class="z-source z-sql">into USERS(U_ID,U_FIRST_NAME,U_LAST_NAME,U_EMAIL) <span class="z-keyword z-other z-DML z-II z-sql">values</span> (<span class="z-constant z-numeric z-sql">5</span>,<span class="z-string z-quoted z-single z-sql"><span class="z-punctuation z-definition z-string z-begin z-sql">'</span>Kpewbrecnfzsi<span class="z-punctuation z-definition z-string z-end z-sql">'</span></span>,<span class="z-string z-quoted z-single z-sql"><span class="z-punctuation z-definition z-string z-begin z-sql">'</span>Nwbsnjh<span class="z-punctuation z-definition z-string z-end z-sql">'</span></span>,<span class="z-string z-quoted z-single z-sql"><span class="z-punctuation z-definition z-string z-begin z-sql">'</span>xwlhcfaxko@uhqsibdojjp.hsm<span class="z-punctuation z-definition z-string z-end z-sql">'</span></span>)
</span><span class="z-source z-sql">into USERS(U_ID,U_FIRST_NAME,U_LAST_NAME,U_EMAIL) <span class="z-keyword z-other z-DML z-II z-sql">values</span> (<span class="z-constant z-numeric z-sql">6</span>,<span class="z-string z-quoted z-single z-sql"><span class="z-punctuation z-definition z-string z-begin z-sql">'</span>Qlzyizkl<span class="z-punctuation z-definition z-string z-end z-sql">'</span></span>,<span class="z-string z-quoted z-single z-sql"><span class="z-punctuation z-definition z-string z-begin z-sql">'</span>Gwnaojlvyud<span class="z-punctuation z-definition z-string z-end z-sql">'</span></span>,<span class="z-string z-quoted z-single z-sql"><span class="z-punctuation z-definition z-string z-begin z-sql">'</span>kzndqj@nsosenf.fm<span class="z-punctuation z-definition z-string z-end z-sql">'</span></span>)
</span><span class="z-source z-sql">into USERS(U_ID,U_FIRST_NAME,U_LAST_NAME,U_EMAIL) <span class="z-keyword z-other z-DML z-II z-sql">values</span> (<span class="z-constant z-numeric z-sql">7</span>,<span class="z-string z-quoted z-single z-sql"><span class="z-punctuation z-definition z-string z-begin z-sql">'</span>Xpepttcemrd<span class="z-punctuation z-definition z-string z-end z-sql">'</span></span>,<span class="z-string z-quoted z-single z-sql"><span class="z-punctuation z-definition z-string z-begin z-sql">'</span>Ktaqqdnqyfvc<span class="z-punctuation z-definition z-string z-end z-sql">'</span></span>,<span class="z-string z-quoted z-single z-sql"><span class="z-punctuation z-definition z-string z-begin z-sql">'</span>uhbnzezvz@buiptt.lkrm<span class="z-punctuation z-definition z-string z-end z-sql">'</span></span>)
</span><span class="z-source z-sql">into USERS(U_ID,U_FIRST_NAME,U_LAST_NAME,U_EMAIL) <span class="z-keyword z-other z-DML z-II z-sql">values</span> (<span class="z-constant z-numeric z-sql">8</span>,<span class="z-string z-quoted z-single z-sql"><span class="z-punctuation z-definition z-string z-begin z-sql">'</span>Ybyinr<span class="z-punctuation z-definition z-string z-end z-sql">'</span></span>,<span class="z-string z-quoted z-single z-sql"><span class="z-punctuation z-definition z-string z-begin z-sql">'</span>Vngairocujhy<span class="z-punctuation z-definition z-string z-end z-sql">'</span></span>,<span class="z-string z-quoted z-single z-sql"><span class="z-punctuation z-definition z-string z-begin z-sql">'</span>igvfzoegbh@hsepkqiwbst.evs<span class="z-punctuation z-definition z-string z-end z-sql">'</span></span>)
</span><span class="z-source z-sql">into USERS(U_ID,U_FIRST_NAME,U_LAST_NAME,U_EMAIL) <span class="z-keyword z-other z-DML z-II z-sql">values</span> (<span class="z-constant z-numeric z-sql">9</span>,<span class="z-string z-quoted z-single z-sql"><span class="z-punctuation z-definition z-string z-begin z-sql">'</span>Ctjixltj<span class="z-punctuation z-definition z-string z-end z-sql">'</span></span>,<span class="z-string z-quoted z-single z-sql"><span class="z-punctuation z-definition z-string z-begin z-sql">'</span>Yvsiei<span class="z-punctuation z-definition z-string z-end z-sql">'</span></span>,<span class="z-string z-quoted z-single z-sql"><span class="z-punctuation z-definition z-string z-begin z-sql">'</span>ozpspssyw@vooiyfuf.xeh<span class="z-punctuation z-definition z-string z-end z-sql">'</span></span>)
</span><span class="z-source z-sql">into USERS(U_ID,U_FIRST_NAME,U_LAST_NAME,U_EMAIL) <span class="z-keyword z-other z-DML z-II z-sql">values</span> (<span class="z-constant z-numeric z-sql">10</span>,<span class="z-string z-quoted z-single z-sql"><span class="z-punctuation z-definition z-string z-begin z-sql">'</span>Lttzwsavnozxu<span class="z-punctuation z-definition z-string z-end z-sql">'</span></span>,<span class="z-string z-quoted z-single z-sql"><span class="z-punctuation z-definition z-string z-begin z-sql">'</span>Kcyjalvzrl<span class="z-punctuation z-definition z-string z-end z-sql">'</span></span>,<span class="z-string z-quoted z-single z-sql"><span class="z-punctuation z-definition z-string z-begin z-sql">'</span>yvwowaqrpku@dyapdumb.fvi<span class="z-punctuation z-definition z-string z-end z-sql">'</span></span>)
</span><span class="z-source z-sql"><span class="z-keyword z-other z-DML z-sql">select</span> <span class="z-variable z-language z-star z-sql">*</span> <span class="z-keyword z-other z-DML z-sql">from</span> dual;
</span><span class="z-source z-sql">
</span><span class="z-source z-sql"><span class="z-comment z-block z-c"><span class="z-punctuation z-definition z-comment z-sql">/*</span> S N I P */</span>
</span><span class="z-source z-sql">
</span><span class="z-source z-sql"><span class="z-keyword z-other z-DML z-sql">insert</span> all
</span><span class="z-source z-sql">into USERS(U_ID,U_FIRST_NAME,U_LAST_NAME,U_EMAIL) <span class="z-keyword z-other z-DML z-II z-sql">values</span> (<span class="z-constant z-numeric z-sql">841</span>,<span class="z-string z-quoted z-single z-sql"><span class="z-punctuation z-definition z-string z-begin z-sql">'</span>Gpkabykoveq<span class="z-punctuation z-definition z-string z-end z-sql">'</span></span>,<span class="z-string z-quoted z-single z-sql"><span class="z-punctuation z-definition z-string z-begin z-sql">'</span>Gljhlrijqop<span class="z-punctuation z-definition z-string z-end z-sql">'</span></span>,<span class="z-string z-quoted z-single z-sql"><span class="z-punctuation z-definition z-string z-begin z-sql">'</span>imnhrheyr@ypccyiu.ah<span class="z-punctuation z-definition z-string z-end z-sql">'</span></span>)
</span><span class="z-source z-sql">into USERS(U_ID,U_FIRST_NAME,U_LAST_NAME,U_EMAIL) <span class="z-keyword z-other z-DML z-II z-sql">values</span> (<span class="z-constant z-numeric z-sql">842</span>,<span class="z-string z-quoted z-single z-sql"><span class="z-punctuation z-definition z-string z-begin z-sql">'</span>Mwrfazphbvmekpw<span class="z-punctuation z-definition z-string z-end z-sql">'</span></span>,<span class="z-string z-quoted z-single z-sql"><span class="z-punctuation z-definition z-string z-begin z-sql">'</span>Kxirzfth<span class="z-punctuation z-definition z-string z-end z-sql">'</span></span>,<span class="z-string z-quoted z-single z-sql"><span class="z-punctuation z-definition z-string z-begin z-sql">'</span>fxoatt@frlbwbn.tf<span class="z-punctuation z-definition z-string z-end z-sql">'</span></span>)
</span><span class="z-source z-sql">into USERS(U_ID,U_FIRST_NAME,U_LAST_NAME,U_EMAIL) <span class="z-keyword z-other z-DML z-II z-sql">values</span> (<span class="z-constant z-numeric z-sql">843</span>,<span class="z-string z-quoted z-single z-sql"><span class="z-punctuation z-definition z-string z-begin z-sql">'</span>Hzxomvkliaxl<span class="z-punctuation z-definition z-string z-end z-sql">'</span></span>,<span class="z-string z-quoted z-single z-sql"><span class="z-punctuation z-definition z-string z-begin z-sql">'</span>Mstdrrmgfmsy<span class="z-punctuation z-definition z-string z-end z-sql">'</span></span>,<span class="z-string z-quoted z-single z-sql"><span class="z-punctuation z-definition z-string z-begin z-sql">'</span>gpeidglzwfa@hwyumsansy.fet<span class="z-punctuation z-definition z-string z-end z-sql">'</span></span>)
</span><span class="z-source z-sql">into USERS(U_ID,U_FIRST_NAME,U_LAST_NAME,U_EMAIL) <span class="z-keyword z-other z-DML z-II z-sql">values</span> (<span class="z-constant z-numeric z-sql">844</span>,<span class="z-string z-quoted z-single z-sql"><span class="z-punctuation z-definition z-string z-begin z-sql">'</span>Vwvwezfsd<span class="z-punctuation z-definition z-string z-end z-sql">'</span></span>,<span class="z-string z-quoted z-single z-sql"><span class="z-punctuation z-definition z-string z-begin z-sql">'</span>Xtfouojiymtlu<span class="z-punctuation z-definition z-string z-end z-sql">'</span></span>,<span class="z-string z-quoted z-single z-sql"><span class="z-punctuation z-definition z-string z-begin z-sql">'</span>zgsdtowsvt@ywfngnijgts.ozd<span class="z-punctuation z-definition z-string z-end z-sql">'</span></span>)
</span><span class="z-source z-sql">into USERS(U_ID,U_FIRST_NAME,U_LAST_NAME,U_EMAIL) <span class="z-keyword z-other z-DML z-II z-sql">values</span> (<span class="z-constant z-numeric z-sql">845</span>,<span class="z-string z-quoted z-single z-sql"><span class="z-punctuation z-definition z-string z-begin z-sql">'</span>Eljntjfkxx<span class="z-punctuation z-definition z-string z-end z-sql">'</span></span>,<span class="z-string z-quoted z-single z-sql"><span class="z-punctuation z-definition z-string z-begin z-sql">'</span>Sifgii<span class="z-punctuation z-definition z-string z-end z-sql">'</span></span>,<span class="z-string z-quoted z-single z-sql"><span class="z-punctuation z-definition z-string z-begin z-sql">'</span>gksggat@ubfmmdopqy.ly<span class="z-punctuation z-definition z-string z-end z-sql">'</span></span>)
</span><span class="z-source z-sql">into USERS(U_ID,U_FIRST_NAME,U_LAST_NAME,U_EMAIL) <span class="z-keyword z-other z-DML z-II z-sql">values</span> (<span class="z-constant z-numeric z-sql">846</span>,<span class="z-string z-quoted z-single z-sql"><span class="z-punctuation z-definition z-string z-begin z-sql">'</span>Ewvyjeudjb<span class="z-punctuation z-definition z-string z-end z-sql">'</span></span>,<span class="z-string z-quoted z-single z-sql"><span class="z-punctuation z-definition z-string z-begin z-sql">'</span>Anihlpdgeg<span class="z-punctuation z-definition z-string z-end z-sql">'</span></span>,<span class="z-string z-quoted z-single z-sql"><span class="z-punctuation z-definition z-string z-begin z-sql">'</span>gietuk@ezciwejuedy.nuf<span class="z-punctuation z-definition z-string z-end z-sql">'</span></span>)
</span><span class="z-source z-sql">into USERS(U_ID,U_FIRST_NAME,U_LAST_NAME,U_EMAIL) <span class="z-keyword z-other z-DML z-II z-sql">values</span> (<span class="z-constant z-numeric z-sql">847</span>,<span class="z-string z-quoted z-single z-sql"><span class="z-punctuation z-definition z-string z-begin z-sql">'</span>Wscdamsgssmouf<span class="z-punctuation z-definition z-string z-end z-sql">'</span></span>,<span class="z-string z-quoted z-single z-sql"><span class="z-punctuation z-definition z-string z-begin z-sql">'</span>Omtaofvlrjs<span class="z-punctuation z-definition z-string z-end z-sql">'</span></span>,<span class="z-string z-quoted z-single z-sql"><span class="z-punctuation z-definition z-string z-begin z-sql">'</span>jrwyzftmbmo@gjylnuez.esq<span class="z-punctuation z-definition z-string z-end z-sql">'</span></span>)
</span><span class="z-source z-sql"><span class="z-keyword z-other z-DML z-sql">select</span> <span class="z-variable z-language z-star z-sql">*</span> <span class="z-keyword z-other z-DML z-sql">from</span> dual;
</span><span class="z-source z-sql"><span class="z-keyword z-other z-DML z-sql">end</span>;
</span><span class="z-source z-sql"><span class="z-keyword z-operator z-math z-sql">/</span>
</span><span class="z-source z-sql"><span class="z-keyword z-other z-LUW z-sql">commit</span>;
</span><span class="z-source z-sql">alter session <span class="z-keyword z-other z-DML z-sql">set</span> cursor_sharing <span class="z-keyword z-operator z-comparison z-sql">=</span> exact;
</span><span class="z-source z-sql"><span class="z-keyword z-other z-DML z-sql">set</span> define on
</span></code></pre><p>PLEX saves the NLS settings of the current session and makes sure that the insert scripts run with the same settings - this means that you should not get any number or date conversion errors. The performance hacks from Connor are <code>alter session set cursor_sharing = force;</code> and <code>insert all</code> - thanks for pointing that out Connor :-)<p>PLEX has many parameters to configure the export - the focus of PLEX is to quickly introduce version control to existing projects (see also <a href=/blog/plex-plsql-export-utilities/>this article about PLEX in general</a>). If you want to use PLEX only for exporting table data, then you should create a wrapper function for it that suits your personal needs - here is an example:<pre class="language-sql z-code" data-lang=sql><code class=language-sql data-lang=sql><span class="z-source z-sql"><span class="z-meta z-create z-sql"><span class="z-keyword z-other z-create z-sql">create or replace</span> <span class="z-keyword z-other z-sql">function</span> </span><span class="z-meta z-toc-list z-full-identifier z-sql"><span class="z-entity z-name z-function z-sql">to_insert</span></span>(
</span><span class="z-source z-sql">  p_table_name <span class="z-storage z-type z-sql">varchar2</span>,
</span><span class="z-source z-sql">  p_max_rows   <span class="z-storage z-type z-sql">integer</span> <span class="z-storage z-modifier z-sql">default</span> <span class="z-constant z-numeric z-sql">1000</span>,
</span><span class="z-source z-sql">  p_batch_size <span class="z-storage z-type z-sql">integer</span> <span class="z-storage z-modifier z-sql">default</span> <span class="z-constant z-numeric z-sql">20</span>)
</span><span class="z-source z-sql">  return clob
</span><span class="z-source z-sql">is
</span><span class="z-source z-sql">  l_file_collection <span class="z-constant z-other z-database-name z-sql">plex</span>.<span class="z-constant z-other z-table-name z-sql">tab_export_files</span>;
</span><span class="z-source z-sql"><span class="z-keyword z-other z-LUW z-sql">begin</span>
</span><span class="z-source z-sql">  l_file_collection :<span class="z-keyword z-operator z-comparison z-sql">=</span> <span class="z-constant z-other z-database-name z-sql">plex</span>.<span class="z-constant z-other z-table-name z-sql">backapp</span>(
</span><span class="z-source z-sql">    p_include_data         <span class="z-keyword z-operator z-comparison z-sql">=</span><span class="z-keyword z-operator z-comparison z-sql">></span> <span class="z-constant z-boolean z-sql">true</span>,
</span><span class="z-source z-sql">    p_data_max_rows        <span class="z-keyword z-operator z-comparison z-sql">=</span><span class="z-keyword z-operator z-comparison z-sql">></span> p_max_rows,
</span><span class="z-source z-sql">    p_data_table_name_like <span class="z-keyword z-operator z-comparison z-sql">=</span><span class="z-keyword z-operator z-comparison z-sql">></span> p_table_name,
</span><span class="z-source z-sql">    p_data_format          <span class="z-keyword z-operator z-comparison z-sql">=</span><span class="z-keyword z-operator z-comparison z-sql">></span> <span class="z-string z-quoted z-single z-sql"><span class="z-punctuation z-definition z-string z-begin z-sql">'</span>insert:<span class="z-punctuation z-definition z-string z-end z-sql">'</span></span> <span class="z-keyword z-operator z-concatenator z-sql">||</span> to_char(p_batch_size),
</span><span class="z-source z-sql">    <span class="z-comment z-line z-double-dash z-sql"><span class="z-punctuation z-definition z-comment z-sql">--</span>overwrite defaults to save work for plex:
</span></span><span class="z-source z-sql">    p_include_templates    <span class="z-keyword z-operator z-comparison z-sql">=</span><span class="z-keyword z-operator z-comparison z-sql">></span> <span class="z-constant z-boolean z-sql">false</span>,
</span><span class="z-source z-sql">    p_include_runtime_log  <span class="z-keyword z-operator z-comparison z-sql">=</span><span class="z-keyword z-operator z-comparison z-sql">></span> <span class="z-constant z-boolean z-sql">false</span>,
</span><span class="z-source z-sql">    p_include_error_log    <span class="z-keyword z-operator z-comparison z-sql">=</span><span class="z-keyword z-operator z-comparison z-sql">></span> <span class="z-constant z-boolean z-sql">false</span>);
</span><span class="z-source z-sql">  return l_file_collection(<span class="z-constant z-numeric z-sql">1</span>).contents;
</span><span class="z-source z-sql"><span class="z-keyword z-other z-DML z-sql">end</span>;
</span><span class="z-source z-sql"><span class="z-keyword z-operator z-math z-sql">/</span>
</span></code></pre><p>Now you can always do a quick export like this: <code>select to_insert('USERS', 10000) from dual;</code><p>Happy exporting and scripting :-)<p>Ottmar</section><nav class="full-width article-navigation"><div><a aria-describedby=left_title aria-label=Prev href=https://ogobrecht.com/blog/new-version-of-oracle-table-api-generator-available/><span class=arrow>←</span> Prev</a><p aria-hidden=true id=left_title>New Version of Oracle Table API Generator Available</div><div><a aria-describedby=right_title aria-label=Next href=https://ogobrecht.com/blog/yet-another-oracle-db-logging-tool-console/>Next <span class=arrow>→</span></a><p aria-hidden=true id=right_title>Yet another Oracle DB logging tool: Console</div></nav><div data-repo-id="MDEwOlJlcG9zaXRvcnkzMjEzNzI3MzE=" class=comments data-category=General data-category-id=DIC_kwDOEyfCO84C0uh1 data-dark-theme=noborder_dark data-input-position=bottom data-lang=en data-lazy-loading=true data-light-theme=noborder_light data-mapping=specific data-reactions-enabled=0 data-repo=ogobrecht/ogobrecht.com data-strict=1 data-term=create-fast-insert-scripts id=comments><script async src=https://ogobrecht.com/js/giscus.min.js></script><noscript>You need JavaScript to view the comments.</noscript></div></article></main><div id=button-container><a title="Go to the comments section" class=no-hover-padding href=#comments id=comments-button> <svg viewbox="0 0 20 20" fill=currentColor><path d="M18 10c0 3.866-3.582 7-8 7a8.841 8.841 0 01-4.083-.98L2 17l1.338-3.123C2.493 12.767 2 11.434 2 10c0-3.866 3.582-7 8-7s8 3.134 8 7zM7 9H5v2h2V9zm8 0h-2v2h2V9zM9 9h2v2H9V9z" clip-rule=evenodd fill-rule=evenodd /></svg> </a><a title="Go to the top of the page" class=no-hover-padding href=# id=top-button> <svg viewbox="0 0 20 20" fill=currentColor><path d="M3.293 9.707a1 1 0 010-1.414l6-6a1 1 0 011.414 0l6 6a1 1 0 01-1.414 1.414L11 5.414V17a1 1 0 11-2 0V5.414L4.707 9.707a1 1 0 01-1.414 0z"/></svg> </a></div><span class=hidden id=copy-success> Copied! </span><span class=hidden id=copy-init> Copy code to clipboard </span><script defer src=https://ogobrecht.com/js/copyCodeToClipboard.min.js></script></div><footer><section><nav class="socials nav-navs"><ul><li><a class="nav-links no-hover-padding social" href=https://ogobrecht.com/atom.xml> <img alt=feed loading=lazy src=https://ogobrecht.com/social_icons/rss.svg title=feed> </a><li><a class="nav-links no-hover-padding social" rel=" me" href=https://github.com/ogobrecht> <img alt=GitHub loading=lazy src=https://ogobrecht.com/social_icons/github.svg title=GitHub> </a><li><a class="nav-links no-hover-padding social" rel=" me" href=https://bsky.app/profile/ogobrecht.com> <img alt=Bluesky loading=lazy src=https://ogobrecht.com/social_icons/bluesky.svg title=Bluesky> </a><li><a class="nav-links no-hover-padding social" rel=" me" href=https://www.linkedin.com/in/ogobrecht/> <img alt=LinkedIn loading=lazy src=https://ogobrecht.com/social_icons/linkedin.svg title=LinkedIn> </a><li><a class="nav-links no-hover-padding social" rel=" me" href=mailto:ottmar.gobrecht@gmail.com> <img alt=Email loading=lazy src=https://ogobrecht.com/social_icons/email.svg title=Email> </a></ul></nav><nav class=nav-navs><small> <ul><li><a class="nav-links no-hover-padding" href=https://ogobrecht.com/imprint/> imprint </a><li><a class="nav-links no-hover-padding" href=https://ogobrecht.com/privacy/> privacy policy </a><li><a class="nav-links no-hover-padding" href=https://ogobrecht.com/sitemap.xml> sitemap </a></ul> </small></nav><div class=credits><small> Powered by <a href=https://www.getzola.org>Zola</a> & <a href=https://github.com/welpo/tabi>tabi</a> </small></div></section><div class="search-modal js" aria-labelledby=modalTitle id=searchModal role=dialog><h1 class=visually-hidden id=modalTitle>Search</h1><div id=modal-content><div id=searchBar><div aria-hidden=true class=search-icon><svg viewbox="0 -960 960 960" xmlns=http://www.w3.org/2000/svg><path d="M784-120 532-372q-30 24-69 38t-83 14q-109 0-184.5-75.5T120-580q0-109 75.5-184.5T380-840q109 0 184.5 75.5T640-580q0 44-14 83t-38 69l252 252-56 56ZM380-400q75 0 127.5-52.5T560-580q0-75-52.5-127.5T380-760q-75 0-127.5 52.5T200-580q0 75 52.5 127.5T380-400Z"/></svg></div><input aria-controls=results-container aria-expanded=false autocomplete=off id=searchInput placeholder=Search… role=combobox spellcheck=false><div class="close-icon interactive-icon" title="Clear search" id=clear-search role=button tabindex=0><svg viewbox="0 -960 960 960" xmlns=http://www.w3.org/2000/svg><path d="m256-200-56-56 224-224-224-224 56-56 224 224 224-224 56 56-224 224 224 224-56 56-224-224-224 224Z"/></svg></div></div><div id=results-container><div id=results-info><span id=zero_results> No results</span><span id=one_results> $NUMBER result</span><span id=many_results> $NUMBER results</span><span id=two_results> $NUMBER results</span><span id=few_results> $NUMBER results</span></div><div id=results role=listbox></div></div></div></div></footer>